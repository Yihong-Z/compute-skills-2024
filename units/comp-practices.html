<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Version control, programming, and testing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../assets/styles.css">
<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../units/comp-practices.html">Modules</a></li><li class="breadcrumb-item"><a href="../units/comp-practices.html">Computational Tools and Practices</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../assets/stat_bear.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Computational Skills Workshop</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/berkeley-scf/compute-skills-2024" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home / Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computational Environment</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Modules</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/comp-practices.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Computational Tools and Practices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/additional-topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numerics and Reproducibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/intro-computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Computing and Command Line (optional)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/intro-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro to Python (optional)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/mini-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python Mini Project (optional)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#our-running-example-newtons-method-for-optimization" id="toc-our-running-example-newtons-method-for-optimization" class="nav-link active" data-scroll-target="#our-running-example-newtons-method-for-optimization">1. Our running example: Newton’s method for optimization</a>
  <ul class="collapse">
  <li><a href="#newtons-method-background" id="toc-newtons-method-background" class="nav-link" data-scroll-target="#newtons-method-background">Newton’s method background</a></li>
  <li><a href="#exercise-implement-univariate-newtons-method" id="toc-exercise-implement-univariate-newtons-method" class="nav-link" data-scroll-target="#exercise-implement-univariate-newtons-method">Exercise: Implement univariate Newton’s method</a></li>
  </ul></li>
  <li><a href="#introduction-to-git-and-github" id="toc-introduction-to-git-and-github" class="nav-link" data-scroll-target="#introduction-to-git-and-github">2. Introduction to Git and GitHub</a>
  <ul class="collapse">
  <li><a href="#exercise-creating-a-git-repository-on-github" id="toc-exercise-creating-a-git-repository-on-github" class="nav-link" data-scroll-target="#exercise-creating-a-git-repository-on-github">Exercise: Creating a Git repository (on GitHub)</a></li>
  <li><a href="#accessing-github-repositories-from-jupyterhub" id="toc-accessing-github-repositories-from-jupyterhub" class="nav-link" data-scroll-target="#accessing-github-repositories-from-jupyterhub">Accessing GitHub repositories from JupyterHub</a></li>
  <li><a href="#basic-use-of-a-repository" id="toc-basic-use-of-a-repository" class="nav-link" data-scroll-target="#basic-use-of-a-repository">Basic use of a repository</a>
  <ul class="collapse">
  <li><a href="#writing-good-commit-messages" id="toc-writing-good-commit-messages" class="nav-link" data-scroll-target="#writing-good-commit-messages">Writing good commit messages</a></li>
  </ul></li>
  <li><a href="#exercise-code-review" id="toc-exercise-code-review" class="nav-link" data-scroll-target="#exercise-code-review">Exercise: code review</a></li>
  </ul></li>
  <li><a href="#understanding-git" id="toc-understanding-git" class="nav-link" data-scroll-target="#understanding-git">3. Understanding Git</a>
  <ul class="collapse">
  <li><a href="#git-visuals-understanding-git-concepts" id="toc-git-visuals-understanding-git-concepts" class="nav-link" data-scroll-target="#git-visuals-understanding-git-concepts">Git visuals: Understanding Git concepts</a></li>
  <li><a href="#key-components-and-terminology" id="toc-key-components-and-terminology" class="nav-link" data-scroll-target="#key-components-and-terminology">Key components and terminology</a>
  <ul class="collapse">
  <li><a href="#commits" id="toc-commits" class="nav-link" data-scroll-target="#commits">Commits</a></li>
  <li><a href="#a-repository" id="toc-a-repository" class="nav-link" data-scroll-target="#a-repository">A repository</a></li>
  <li><a href="#staging-area-index" id="toc-staging-area-index" class="nav-link" data-scroll-target="#staging-area-index">Staging area / index</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#code-style-and-documentation" id="toc-code-style-and-documentation" class="nav-link" data-scroll-target="#code-style-and-documentation">4. Code style and documentation</a>
  <ul class="collapse">
  <li><a href="#linting" id="toc-linting" class="nav-link" data-scroll-target="#linting">Linting</a></li>
  <li><a href="#exercise-add-documentation-and-comments-to-your-newton-module" id="toc-exercise-add-documentation-and-comments-to-your-newton-module" class="nav-link" data-scroll-target="#exercise-add-documentation-and-comments-to-your-newton-module">Exercise: add documentation and comments to your Newton module</a></li>
  </ul></li>
  <li><a href="#debugging" id="toc-debugging" class="nav-link" data-scroll-target="#debugging">5. Debugging</a>
  <ul class="collapse">
  <li><a href="#demo-debugging-the-binary_search-example" id="toc-demo-debugging-the-binary_search-example" class="nav-link" data-scroll-target="#demo-debugging-the-binary_search-example">Demo: debugging the <code>binary_search</code> example</a>
  <ul class="collapse">
  <li><a href="#using-the-jupyterlab-visual-debugger" id="toc-using-the-jupyterlab-visual-debugger" class="nav-link" data-scroll-target="#using-the-jupyterlab-visual-debugger">Using the JupyterLab visual debugger</a></li>
  <li><a href="#using-the-ipython-debugger-ipdb" id="toc-using-the-ipython-debugger-ipdb" class="nav-link" data-scroll-target="#using-the-ipython-debugger-ipdb">Using the IPython debugger (<code>ipdb</code>)</a></li>
  </ul></li>
  <li><a href="#exercise-debugging-your-newton-code" id="toc-exercise-debugging-your-newton-code" class="nav-link" data-scroll-target="#exercise-debugging-your-newton-code">Exercise: debugging your Newton code</a></li>
  </ul></li>
  <li><a href="#defensive-programming-error-checking-and-testing" id="toc-defensive-programming-error-checking-and-testing" class="nav-link" data-scroll-target="#defensive-programming-error-checking-and-testing">6. Defensive programming, error checking and testing</a>
  <ul class="collapse">
  <li><a href="#demo-unit-tests-and-pytest" id="toc-demo-unit-tests-and-pytest" class="nav-link" data-scroll-target="#demo-unit-tests-and-pytest">Demo: Unit tests and <code>pytest</code></a></li>
  <li><a href="#exercise-test-cases" id="toc-exercise-test-cases" class="nav-link" data-scroll-target="#exercise-test-cases">Exercise: Test cases</a></li>
  <li><a href="#exercise-unit-tests" id="toc-exercise-unit-tests" class="nav-link" data-scroll-target="#exercise-unit-tests">Exercise: Unit tests</a></li>
  <li><a href="#exercise-error-trapping-robust-code-and-defensive-programming" id="toc-exercise-error-trapping-robust-code-and-defensive-programming" class="nav-link" data-scroll-target="#exercise-error-trapping-robust-code-and-defensive-programming">Exercise: Error trapping, robust code, and defensive programming</a></li>
  </ul></li>
  <li><a href="#multi-user-git" id="toc-multi-user-git" class="nav-link" data-scroll-target="#multi-user-git">7. Multi-user Git</a>
  <ul class="collapse">
  <li><a href="#demo-branching-and-pull-requests-merge-conflicts" id="toc-demo-branching-and-pull-requests-merge-conflicts" class="nav-link" data-scroll-target="#demo-branching-and-pull-requests-merge-conflicts">Demo: Branching and pull requests, merge conflicts</a>
  <ul class="collapse">
  <li><a href="#branching" id="toc-branching" class="nav-link" data-scroll-target="#branching">Branching</a></li>
  <li><a href="#pull-requests" id="toc-pull-requests" class="nav-link" data-scroll-target="#pull-requests">Pull requests</a></li>
  <li><a href="#merge-conflicts" id="toc-merge-conflicts" class="nav-link" data-scroll-target="#merge-conflicts">Merge conflicts</a></li>
  </ul></li>
  <li><a href="#multivariate-newtons-method" id="toc-multivariate-newtons-method" class="nav-link" data-scroll-target="#multivariate-newtons-method">Multivariate Newton’s method</a></li>
  <li><a href="#exercise-branching" id="toc-exercise-branching" class="nav-link" data-scroll-target="#exercise-branching">Exercise: Branching</a></li>
  <li><a href="#exercise-pull-requests-prs" id="toc-exercise-pull-requests-prs" class="nav-link" data-scroll-target="#exercise-pull-requests-prs">Exercise: Pull requests (PRs)</a></li>
  <li><a href="#exercise-code-review-1" id="toc-exercise-code-review-1" class="nav-link" data-scroll-target="#exercise-code-review-1">Exercise: Code review</a></li>
  <li><a href="#exercise-merge-the-pr" id="toc-exercise-merge-the-pr" class="nav-link" data-scroll-target="#exercise-merge-the-pr">Exercise: Merge the PR</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../units/comp-practices.html">Modules</a></li><li class="breadcrumb-item"><a href="../units/comp-practices.html">Computational Tools and Practices</a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Version control, programming, and testing</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
DRAFT CONTENT (2024-08-01)
</div>
</div>
<div class="callout-body-container callout-body">
<p>This module is drafted but still under construction.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
CJP development notes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>links:</p>
<ul>
<li>https://software-carpentry.org/lessons/</li>
<li>https://ucb-stat-159-s23.github.io/site (/var/tmp/site/lectures/intro-git)</li>
<li>https://docs.google.com/document/d/1osbFw5hTnt7wH7xnm_lIf2l0Ffn5c-xHyPEssbBvGXo/edit</li>
</ul>
<p>export GIT_CONFIG_NOSYSTEM=1</p>
<p>NOTES: might need to set merging policy:</p>
<p>install ruff in DataHub and on SCF</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Overview
</div>
</div>
<div class="callout-body-container callout-body">
<p>This module presents the core content of the workshop on version control (using Git), code style, documentation, and testing.</p>
</div>
</div>
<section id="our-running-example-newtons-method-for-optimization" class="level1">
<h1>1. Our running example: Newton’s method for optimization</h1>
<section id="newtons-method-background" class="level2">
<h2 class="anchored" data-anchor-id="newtons-method-background">Newton’s method background</h2>
<p>We’ll use a running example, Newton’s method for optimization, during this workshop. It’s simple enough to be straightforward to code but can involve various modifications, extensions, etc. to be a rich enough example that we can use it to demonstrate various topics and tools.</p>
<p>Recall that Newton’s method works as follows to optimize some objective function, <span class="math inline">\(f(x)\)</span>, as a function of univariate or multivariate <span class="math inline">\(x\)</span>, where <span class="math inline">\(f(x)\)</span> is univariate.</p>
<p>Newton’s method is iterative. If we are at step <span class="math inline">\(t-1\)</span>, the next value (when minimizing a function) is:</p>
<p><span class="math display">\[
x_t = x_{t-1} - f^{\prime}(x_{t-1}) / f^{\prime\prime}(x_{t-1})
\]</span></p>
<p>Here are the steps:</p>
<ul>
<li>determine a starting value, <span class="math inline">\(x_0\)</span></li>
<li>iterate:
<ul>
<li>at step <span class="math inline">\(t\)</span>, the next value (the update) is given by the equation above</li>
<li>stop when <span class="math inline">\(\left\Vert x_{t} - x_{t-1} \right\Vert\)</span> is “small”</li>
</ul></li>
</ul>
<p>You can derive it by finding the root of the gradient function using a Taylor series approximation to the gradient.</p>
</section>
<section id="exercise-implement-univariate-newtons-method" class="level2">
<h2 class="anchored" data-anchor-id="exercise-implement-univariate-newtons-method">Exercise: Implement univariate Newton’s method</h2>
<p>Here’s what you’ll need your code to do:</p>
<ul>
<li>accept a starting value, <span class="math inline">\(x_0\)</span>, and the function, <span class="math inline">\(f(\cdot)\)</span>, to optimize</li>
<li>implement the iterative algorithm</li>
<li>implement the stopping criterion (feel free to keep this simple)</li>
<li>calculate the first and second derivatives using a basic finite difference approach to estimating the derivative based on the definition of a derivative as a limit
<ul>
<li>note that the second derivative can be seen as calling the first derivative twice…</li>
</ul></li>
<li>consider what to return as the output (feel free to keep it simple)</li>
<li>don’t worry much for now about making your code robust or dealing with tricky situations</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Don’t make your finite difference (“epsilon”) too small or you’ll actually get inaccurate estimates. (We’ll discuss why when we talk a bit out numerical issues in computing later.)</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For now, please do not use any Python packages that provide finite difference-based derivatives (we’ll do that later, and it’s helpful to have more code available for the work we’ll do today).</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You’re welcome to develop your code in a Notebook or in the DataHub editor or in a separate editor on your laptop.</p>
</div>
</div>
<p>Once you’ve written your Python functions, put your code into a simple text file, called <code>newton.py</code>. In doing so you’ve created a Python <em>module</em>. Once you have your module, you can use it like this:</p>
<div id="19ec8fab" class="cell" data-execution_count="1">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> newton</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>newton.optimize(start, fun)   <span class="co">## Assuming your function is called `optimize`.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>newton.optimize(<span class="fl">2.5</span>, np.cos)  <span class="co">## Minimizing cos(x) from close-ish to one minimum.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A <em>module</em> is a collection of related code in a file with the extension <code>.py</code>. The code can include functions, classes, and variables, as well as runnable code. To access the objects in the module, you need to import the module.</p>
</section>
</section>
<section id="introduction-to-git-and-github" class="level1">
<h1>2. Introduction to Git and GitHub</h1>
<section id="exercise-creating-a-git-repository-on-github" class="level2">
<h2 class="anchored" data-anchor-id="exercise-creating-a-git-repository-on-github">Exercise: Creating a Git repository (on GitHub)</h2>
<p>Go to <code>github.com/&lt;your_username&gt;</code> and click on the <code>Repositories</code> tag. Then click on the <code>New</code> button.</p>
<ul>
<li>In the form, give the repository the name <code>newton-practice</code> (so others who are working with you can find it easily)</li>
<li>Provide a short description</li>
<li>Click on “Add a README file”.</li>
<li>Leave the repository as “Public” so that others can interact with your repository when we practice later.</li>
<li>Scroll down to <code>Python</code> under <code>Add .gitignore</code>.</li>
<li>Select a license (the BSD 3 Clause license is a good “permissive” one).</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Creating repositories on your laptop first
</div>
</div>
<div class="callout-body-container callout-body">
<p>It’s also possible to <a href="https://docs.github.com/en/migrations/importing-source-code/using-the-command-line-to-import-source-code/adding-locally-hosted-code-to-github#initializing-a-git-repository">create the repository from the terminal on your machine</a> and then link it to your GitHub account, but that’s a couple extra steps we won’t go into here at the moment.</p>
</div>
</div>
</section>
<section id="accessing-github-repositories-from-jupyterhub" class="level2">
<h2 class="anchored" data-anchor-id="accessing-github-repositories-from-jupyterhub">Accessing GitHub repositories from JupyterHub</h2>
<p>Authenticating with GitHub can be a bit tricky, particularly when using DataHub (i.e., JupyterHub).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Accessing GitHub from your laptop rather than DataHub
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you’re on your laptop and already set up to use GitHub, you don’t need to do the steps in this section, but if you’re using your laptop and not set up to use GitHub, these instructions should work there too. (it may also depend on the version of <code>git</code> you are using; e.g., version 2.34.1 is too old but 2.39 should be fine).</p>
</div>
</div>
<p>We’ll use a tool (an ‘app’) that helps us with this, provided in the <code>gh_scoped_creds</code> Python package.</p>
<p>First configure git in the terminal:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name <span class="st">"Jane Doe"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email <span class="st">"jane_doe@berkeley.edu"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> color.ui <span class="st">"auto"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> pull.rebase false</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>That will modify your <code>~/.gitconfig</code> file.</p>
<p>Then run this in the terminal:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gh-scoped-creds</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or you could instead run this in IPython or Jupyter Notebook:</p>
<div id="0768f882" class="cell" data-execution_count="2">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> gh_scoped_creds</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>ghscopedcreds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>When you do that you’ll see a <a href="https://github.com/login/device">link</a> and a code. Go to the link in a browser (on your laptop, outside of DataHub), click <code>Continue</code>, input the code, and click <code>Authorize Berkeley-Datahub-Git-Access</code>. This will grant access to GitHub from JupyterHub for 8 hours (or until you stop your JupyterHub server).</p>
<p>Then (only the first time you are doing all this) go to the URL that is printed out (which should be <a href="https://github.com/apps/stat-computing-jupyterhub)" class="uri">https://github.com/apps/stat-computing-jupyterhub)</a> and click on <code>Install</code> (and then if you have access to multiple GitHub organizations, choose your personal org, namely your GitHub username). Choose <code>Only select repositories</code> and select the repository you are using for the workshop, namely <code>newton-practice</code>. Then click <code>Install</code>.</p>
<p>[TODO: check the last set of instructions to make sure they are correct and easy to follow.]</p>
</section>
<section id="basic-use-of-a-repository" class="level2">
<h2 class="anchored" data-anchor-id="basic-use-of-a-repository">Basic use of a repository</h2>
<p>In the terminal, let’s make a small change to the README, register the change with Git (this is called a <em>commit</em>), and push the changes upstream to GitHub (which has the <em>remote</em> copy of the repository).</p>
<section id="step-1.-clone-the-repository" class="level4">
<h4 class="anchored" data-anchor-id="step-1.-clone-the-repository">Step 1. Clone the repository</h4>
<p>First make a local copy of the repository from the remote on GitHub. It’s best do this <strong>outside</strong> of the <code>compute-skills-2024</code> directory; otherwise you’ll have a repository nested within a repository.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  <span class="co"># Avoid cloning into the `compute-skills-2024` repository.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/<span class="op">&lt;</span>your_username<span class="op">&gt;</span>/newton-practice</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If we run this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> newton-practice</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> .git</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> .git/config</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>we should see a bunch of output (truncated here) indicating that <code>newton-practice</code> is a Git repository, and that in this case the local repository is linked to a <em>remote</em> repository (the repository we created on GitHub):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">total</span> 40</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 jovyan jovyan  264 Aug  2 15:04 config</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 jovyan jovyan   73 Aug  2 15:04 description</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 jovyan jovyan   21 Aug  2 15:04 HEAD</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span>   1 paciorek scfstaff   16 Jul 24 14:48 COMMIT_EDITMSG</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span>   1 paciorek scfstaff  656 Jul 23 18:20 config</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ex">[remote</span> <span class="st">"origin"</span>]</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="ex">url</span> = https://github.com/paciorek/newton-practice</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="ex">fetch</span> = +refs/heads/<span class="pp">*</span>:refs/remotes/origin/<span class="pp">*</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Step 2. Add files</p>
<p>Next move (or copy) your Python module into the repository directory. I’ll use the test module that we’ll work with later, but you’ll do it with your Newton method module.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> newton-practice</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ../compute-skills-2024/units/binary_search.py .</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Tell git to track the file</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add binary_search.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Step 3. Edit file(s)</p>
<p>Edit the README file to indicate that the repository has a basic implementation of Newton’s method. (In DataHub, you can double-click on the README in the file manager pane.)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">## Tell git to keep track of the changes to the file.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add README.md</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Register the changes with Git.</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span><span class="st">"Add basic implementation of Newton's method."</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Synchronize the changes with the remote.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We could have cloned the (public) repository without the <code>gh_scoped_creds</code> credentials stuff earlier, but if we tried to push to it, we would have been faced with GitHub asking for our password, which would have required us to create a GitHub authentication token that we would paste in.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Instead of having to <code>add</code> files that already part of the repository (such as <code>README.md</code>) we could do:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-a</span> <span class="at">-m</span><span class="st">"Update README."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We do need to explicitly add any <strong>new</strong> files (e.g., <code>newton.py</code>) that are not yet registered with git via <code>git add</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can also edit and add files directly to your GitHub repository in a browser window. This is a good backup if you run into problems making commits from DataHub or your laptop.</p>
</div>
</div>
</section>
<section id="writing-good-commit-messages" class="level3">
<h3 class="anchored" data-anchor-id="writing-good-commit-messages">Writing good commit messages</h3>
<p>Some tips:</p>
<ul>
<li>Concisely describe what changed (and for more complicated situations, why), not how.</li>
<li>Two options (depending on whether the commit makes one or more changes):
<ul>
<li>Keep it short (one line, &lt;72 characters)</li>
<li>Have a subject line separated from the body by a blank line.
<ul>
<li>Keep subject to 50 characters and each body line to 72 characters.</li>
<li>Best to edit message in an editor – omit the <code>-m</code> flag to <code>git commit</code>.</li>
</ul></li>
</ul></li>
<li>If you’re working on a project with GitHub issues, reference the issue at the bottom.</li>
<li>Start each item in the message with a verb (present tense) and provide a complete sentence.</li>
</ul>
<p>If you find your commit message is covering multiple topics, it probably means you should have made multiple (“atomic”) commits.</p>
</section>
</section>
<section id="exercise-code-review" class="level2">
<h2 class="anchored" data-anchor-id="exercise-code-review">Exercise: code review</h2>
<section id="step-1-make-suggestions" class="level4">
<h4 class="anchored" data-anchor-id="step-1-make-suggestions">Step 1: Make suggestions</h4>
<p>Go to your partner’s repository at <code>https://github.com/&lt;user_name&gt;/newton-practice</code>.</p>
<ol type="1">
<li>Look over their code.</li>
<li>Make some comments/suggestions in a new GitHub issue (go to the <code>Issues</code> button and click on <code>New issue</code>).</li>
</ol>
</section>
<section id="step-2-respond-to-suggestions" class="level4">
<h4 class="anchored" data-anchor-id="step-2-respond-to-suggestions">Step 2: Respond to suggestions</h4>
<p>In response to your partner’s comments, make some small change(s) to your <code>newton.py</code> code.</p>
<p>You can do this in DataHub (or locally on your laptop if that’s what you’re doing) and make a commit as we did in the previous exercise.</p>
<p>Or you can do the editing in your GitHub browser window by clicking on the file and choosing the pencil icon (far right) to edit it. When you save it, a commit will be made. Make sure to provide a commit message. You can also create new files via the <code>+</code> button in the top of the left sidebar. If you make changes directly on GitHub, you’ll also want to run <code>git pull</code> to pull down the changes to your local repository on DataHub or your laptop.</p>
</section>
</section>
</section>
<section id="understanding-git" class="level1">
<h1>3. Understanding Git</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
More than the syntax
</div>
</div>
<div class="callout-body-container callout-body">
<p>So far we’ve just introduced Git by its mechanics/syntax. This is ok (but not ideal) for basic one-person operation, but to really use Git effectively you need to understand conceptually how it works.</p>
<p>More generally if you understand things conceptually, then looking up the syntax of a command or the mechanics of how to do something will be straightforward.</p>
</div>
</div>
<p>We’ll start with some visuals and then go back to some Git terminology and to the structure of a repository.</p>
<section id="git-visuals-understanding-git-concepts" class="level2">
<h2 class="anchored" data-anchor-id="git-visuals-understanding-git-concepts">Git visuals: Understanding Git concepts</h2>
<p>Fernando Perez has nice visualization (<a href="https://docs.google.com/presentation/d/1YlM3boYLE8DwbxGNO3ZVVt3e9gEoBgD1uc9RtItUYCU">online version</a>, <a href="git_visuals.pdf">PDF version</a>) of a basic Git workflow that we’ll walk through.</p>
<p>Note that we haven’t actually seen in prtacie some of what is shown in the visual: tags, branches, and merging, but we’ll be using those ideas later.</p>
</section>
<section id="key-components-and-terminology" class="level2">
<h2 class="anchored" data-anchor-id="key-components-and-terminology">Key components and terminology</h2>
<section id="commits" class="level3">
<h3 class="anchored" data-anchor-id="commits">Commits</h3>
<p>A <em>commit</em> is a snapshot of our work at a point in time. So far in our own repository, we’ve been working with a linear sequence of snapshots, but the visualization showed that we can actually have a directed acyclic graph (DAG) of snapshots once we have <em>branches</em>.</p>
<p>Each commit has:</p>
<ul>
<li>a hash identifier - a unique identifier produced by hashing the changes introduced in the commit and also the parent commit,</li>
<li>hashes of the files in the repository in their current state, and</li>
<li>the changes (based on the <code>diff</code> tool) relative to the parent commit.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="commit.png" class="img-fluid figure-img"></p>
<figcaption>A Git commit (Credit: ProGit book, CC License)</figcaption>
</figure>
</div>
</section>
<section id="a-repository" class="level3">
<h3 class="anchored" data-anchor-id="a-repository">A repository</h3>
<p>A <em>repository</em> is the set of files for a project with their history. It’s a collection of commits in the form of an directed acyclic graph.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tree.png" class="img-fluid figure-img"></p>
<figcaption>A (simple) Git repository (Credit: ProGit book, CC License)</figcaption>
</figure>
</div>
<p>Some other terms:</p>
<ul>
<li>HEAD: a pointer to the current commit</li>
<li>tag: a label for a commit</li>
<li>branch: a commit - often indicating a commit that has “branched” off of some main workflow or some linear sequence of commits</li>
</ul>
</section>
<section id="staging-area-index" class="level3">
<h3 class="anchored" data-anchor-id="staging-area-index">Staging area / index</h3>
<p>The index (staging area) keeps track of changes (made to tracked files) that are added, but that are not yet committed.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="staging.png" title="Visualization of local operations in Git" class="img-fluid figure-img"></p>
<figcaption>local operations in a repository (Credit: ProGit book, CC License)</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rolling back changes (optional)
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Uncommitted changes</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Staged, uncommitted changes</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Committed changes</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Pushed changes</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>If I make some changes to a file that I decide are a mistaken, before <code>git add</code> (i.e., before registering/staging the changes with <code>git</code>), I can always still edit the file to undo the mistakes.</p>
<p>But I can also go back to the version stored by Git.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># git checkout -- file.txt  # This is older syntax.</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> restore file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>If we’ve added (staged) files via <code>git add</code> but have not yet committed them, the files are in the index (staging area). We can get those changes out of the staging area like this:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># git reset HEAD file.txt  # This is older syntax.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> restore <span class="at">--staged</span> file.txt</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that the changes still exist in <code>file.txt</code> but they’re no longer registered/staged with Git.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Suppose you need to add or modify to your commit. This illustrates a few things you might do to update your commit.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">'Initial commit'</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add forgotten_file.txt</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit file.txt.</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add file.txt</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Get version of file from previous commit.</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="op">&lt;</span>commit_hash<span class="op">&gt;</span> file.txt</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">--amend</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> revert <span class="op">&lt;</span>commit_hash<span class="op">&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this creates a new commit that undoes the changes you don’t want. So the undoing shows up in the history. This is the safest option.</p>
<p>If you’re <em>sure</em> no one else has pulled your changes from the remote:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> reset <span class="op">&lt;</span>commit_hash<span class="op">&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Make changes</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-a</span> <span class="at">-m</span><span class="st">'reworked the mistake'</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-f</span> origin <span class="op">&lt;</span>branch_name<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will remove the previous commit at the remote (GitHub in our case).</p>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="code-style-and-documentation" class="level1">
<h1>4. Code style and documentation</h1>
<p>Having a (reasonably) consistent and clean style, plus documentation, is important for being able to read and maintain your code.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Q: Who is the person most likely to use your code again?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A: You, but at some point in the future by which you will have forgotten what the code does and why.</p>
<p>I can’t tell you how many times I’ve looked back at my own code and been amazed at how little I remember and frustrated with the former self who wrote it.</p>
</div>
</div>
</div>
<p>A go-to reference on Python code style is the <a href="https://peps.python.org/pep-0008">PEP8 style guide</a>. That said, it’s extensive, quite detailed, and hard to absorb quickly.</p>
<p>Here are a few key suggestions:</p>
<ul>
<li><p>Indentation:</p>
<ul>
<li>Python is strict about indentation of course.</li>
<li>Use 4 spaces per indentation level (avoid tabs if possible).</li>
</ul></li>
<li><p>Whitespace: use it in a variety of places. Some places where it is good to have it are</p>
<ul>
<li>around operators (assignment and arithmetic), e.g., <code>x = x * 3</code>;</li>
<li>between function arguments, e.g., <code>myfun(x, 3, data)</code>;</li>
<li>between list/tuple elements, e.g., <code>x = [3, 5, 7]</code>; and</li>
<li>between matrix/array indices, e.g., <code>x[3, :4]</code>.</li>
</ul></li>
<li><p>Use blank lines to separate blocks of code with comments to say what the block does.</p></li>
<li><p>Use whitespaces or parentheses for clarity even if not needed for order of operations. For example, <code>a/y*x</code> will work but is not easy to read and you can easily induce a bug if you forget the order of ops. Instead, use <code>a/y * x</code> or <code>(a/y) * x</code>.</p></li>
<li><p>Avoid code lines longer than 79 characters and comment/docstring lines longer than 72 characters.</p></li>
<li><p>Comments:</p>
<ul>
<li>Add comments to explain why, not how.</li>
<li>Don’t belabor the obvious; avoid things like <code>x = x + 1  # Increment x.</code>.</li>
<li>Some key things to document:
<ul>
<li>summarizing a block of code,</li>
<li>explaining a complicated piece of code or particular construction, and</li>
<li>explaining non-obvious values or steps, such as <code>x = x + 1 # Compensate for image border.</code></li>
</ul></li>
<li>Comments should generally be complete sentences.</li>
</ul></li>
<li><p>You can use parentheses to group operations such that they can be split up into lines and easily commented, e.g.,</p>
<div id="b52b42e0" class="cell" data-execution_count="3">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>newdf <span class="op">=</span> (</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>        pd.read_csv(<span class="st">'file.csv'</span>)                   <span class="co"># 1988 census data.</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        .rename(columns <span class="op">=</span> {<span class="st">'STATE'</span>: <span class="st">'us_state'</span>})  <span class="co"># Adjust column names.</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        .dropna()                                 <span class="co"># Remove rows with missing values.</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></li>
<li><p>Being consistent about the naming style for objects and functions is hard, but try to be consistent. PEP8 suggests:</p>
<ul>
<li>Class names should be UpperCamelCase.</li>
<li>Function, method, and variable names should be snake_case, e.g., <code>number_of_its</code> or <code>n_its</code>.</li>
<li>Non-public methods and variables should have a leading underscore.</li>
</ul></li>
<li><p>Try to have the names be informative without being overly long.</p></li>
<li><p>Don’t overwrite names of objects/functions that already exist in the language. E.g., don’t use <code>len</code> in Python. That said, the namespace system helps with the unavoidable cases where there are name conflicts.</p></li>
<li><p>Use active names for functions (e.g., <code>calc_loglik</code>, <code>calc_log_lik</code> rather than <code>loglik</code> or <code>loglik_calc</code>). Functions are akin to verbs.</p></li>
<li><p>Learn from others’ code</p></li>
</ul>
<section id="linting" class="level2">
<h2 class="anchored" data-anchor-id="linting">Linting</h2>
<p>Linting is the process of applying a tool to your code to enforce style.</p>
<p>We’ll demo using <code>ruff</code> to some example code. You might also consider <code>black</code>.</p>
<p>We’ll practice with <code>ruff</code> with a small module we’ll use next also for debugging.</p>
<ul>
<li><p>First, we check for and fix syntax errors.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> check binary_search.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Then we ask <code>ruff</code> to reformat to conform to standard style.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ruff</span> format binary_search.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<p>Let’s see what changed:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span> binary_search_orig.py binary_search.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exercise-add-documentation-and-comments-to-your-newton-module" class="level2">
<h2 class="anchored" data-anchor-id="exercise-add-documentation-and-comments-to-your-newton-module">Exercise: add documentation and comments to your Newton module</h2>
<ol type="1">
<li>Add a <a href="https://peps.python.org/pep-0257">doc string</a> to each of your functions. Focus on your main function. Take a look at an example, such as <code>help(numpy.linalg.cholesky)</code> to see the different parts and the format.</li>
<li>Consider whether to add comments to your code.</li>
<li>Apply <code>ruff</code> to your code.</li>
<li>Compare the results with the style suggestions above and do additional reformatting as needed.</li>
<li>Commit and push to GitHub. Remember to have a good commit message!</li>
</ol>
</section>
</section>
<section id="debugging" class="level1">
<h1>5. Debugging</h1>
<p>Once you start writing more complicated code, even in an interpreted language such as Python that you can run line-by-line, you’ll want to use a debugger, particularly when you have nested function calls.</p>
<p>Debugging can be a slow process, so you typically start a debugging session by deciding which line in your code you would like to start tracing the behavior from, and you place a <em>breakpoint</em>. Then you can have the debugger run the program up to that point and stop at it, allowing you to:</p>
<ol type="1">
<li>inspect the current state of variables,</li>
<li>step through the code line by line,</li>
<li>step over or into functions as they are called, and</li>
<li>resume program execution.</li>
</ol>
<p>The <em>stack</em> is the series of nested function calls. When an error occurs, Python will print the <em>stack trace</em> showing the sequence of calls leading to the error. This can be helpful and distracting/confusing.</p>
<p>We’ll use the debugger in JupyterLab; similar functionality is in VS Code. And you can use <code>pdb</code> directly from the command line; the ideas are all the same.</p>
<section id="demo-debugging-the-binary_search-example" class="level2">
<h2 class="anchored" data-anchor-id="demo-debugging-the-binary_search-example">Demo: debugging the <code>binary_search</code> example</h2>
<section id="using-the-jupyterlab-visual-debugger" class="level3">
<h3 class="anchored" data-anchor-id="using-the-jupyterlab-visual-debugger">Using the JupyterLab visual debugger</h3>
<p>The function <code>binary_search()</code> in the <code>binary_search.py</code> module attempts to do a binary search for an item in a sorted list. It looks in the middle of the list and if the value in the list is larger than the item, it recurses to look in the first half of the list, otherwise in the second half. It continues in this fashion until it is down to a single item and then checks if that item is what is being searched for.</p>
<div id="7f4f0f64" class="cell" data-execution_count="4">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> binary_search <span class="im">as</span> bs</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>bs.search([<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>,<span class="dv">203</span>,<span class="dv">205</span>],<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>0</code></pre>
</div>
</div>
<div id="830c2e58" class="cell" data-execution_count="5">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>bs.search([<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>,<span class="dv">203</span>,<span class="dv">205</span>],<span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>-1</code></pre>
</div>
</div>
<div id="81038dab" class="cell" data-execution_count="6">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>bs.search([<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>,<span class="dv">203</span>,<span class="dv">205</span>],<span class="dv">17</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>4</code></pre>
</div>
</div>
<p>Clearly that doesn’t always work. Let’s debug the failing case.</p>
<p>We’ll work in our Jupyter notebook.</p>
<ul>
<li>First turn on debugging capability by clicking on the small “bug” icon of the top navigation bar under the file tabs and to the left of the info about the kernel.</li>
<li>Next we click on a line of code to set a breakpoint (or add <code>breakpoint()</code> in a line of a source file).</li>
<li>Now we run the function by executing the cell containing the function call. We can:
<ul>
<li>continue (to the end or the next breakpoint),</li>
<li>run the next line,</li>
<li>step (in/down) into a nested function, or</li>
<li>step (out/up) out of a function.</li>
</ul></li>
</ul>
</section>
<section id="using-the-ipython-debugger-ipdb" class="level3">
<h3 class="anchored" data-anchor-id="using-the-ipython-debugger-ipdb">Using the IPython debugger (<code>ipdb</code>)</h3>
<p>We can use the IPython <code>%debug</code> “magic” to activate a debugger as well.</p>
<p>One way this is particularly useful is “post-mortem” debugging, i.e., debugging when exceptions (errors) have occurred. We just invoke <code>%debug</code> and then (re)run the code that is failing.</p>
<p>Once in the ipdb debugger, we can use these commands (most of which correspond to icons we used to control the JupyterLab debugger behavior</p>
<ul>
<li><code>p expr</code> to print the result of the <code>expr</code> code</li>
<li><code>c</code> to continue execution (until the end or the next breakpoint)</li>
<li><code>n</code> to run the next line of code</li>
<li><code>u</code> and <code>d</code> to step up and down through the stack of function calls</li>
<li><code>q</code> to quit the debugger</li>
</ul>
<p>We’ll put a silly error into the <code>binary_search</code> code, restart the kernel, and use the post-mortem debugging approach as an illustration.</p>
</section>
</section>
<section id="exercise-debugging-your-newton-code" class="level2">
<h2 class="anchored" data-anchor-id="exercise-debugging-your-newton-code">Exercise: debugging your Newton code</h2>
<p>Run your Newton method on the following function, <span class="math inline">\(x^4/4 - x^3 -x\)</span>. Sometimes it should fail.</p>
<p>Use the debugger to try to see what goes wrong. (For our purposes here, do this using the debugger; don’t figure it out from first principles mathematically or graphically.)</p>
<p>Conditional breakpoints are a useful tool that causes the debugger to stop at a breakpoint only if some condition is true (e.g., if some extreme value is reached in the Newton iterations). I don’t see that it’s possible to do this with the JupyterLab debugger, but with the <code>ipdb</code> debugger you can do things like this to debug a particular line of a particular file if a condition (here <code>x==5</code>) is met:</p>
<pre><code>b path/to/script.py:999, x==5</code></pre>
</section>
</section>
<section id="defensive-programming-error-checking-and-testing" class="level1">
<h1>6. Defensive programming, error checking and testing</h1>
<section id="demo-unit-tests-and-pytest" class="level2">
<h2 class="anchored" data-anchor-id="demo-unit-tests-and-pytest">Demo: Unit tests and <code>pytest</code></h2>
<p><code>pytest</code> is a very popular package/framework for testing.</p>
<p>We create test functions that check for the expected result.</p>
<p>We use <code>assert</code> statements. These are ways of generally setting up sanity checks in your code. They are usually used in development, or perhaps data analysis workflows, rather than production code. They are a core part of setting up tests such as here with <code>pytest</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> test_bs.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exercise-test-cases" class="level2">
<h2 class="anchored" data-anchor-id="exercise-test-cases">Exercise: Test cases</h2>
<p>With a partner, brainstorm some test cases for your implementation of Newton’s method in terms of the user’s function and input values a user might provide.</p>
<p>In addition to cases where it should succeed, you’ll want to consider cases where Newton’s method fails and test whether the user gets an informative result. Of course as a starting point, the case we used for the debugging exercise is a good one for a failing case.</p>
<p>We’ll collect some possible tests once each group has had a chance to brainstorm.</p>
</section>
<section id="exercise-unit-tests" class="level2">
<h2 class="anchored" data-anchor-id="exercise-unit-tests">Exercise: Unit tests</h2>
<p>We’ll implement our test cases as unit tests using the <code>pytest</code> package.</p>
<p>Include tests for:</p>
<ul>
<li>successful optimization</li>
<li>unsuccessful optimization</li>
<li>invalid user inputs</li>
</ul>
<p>with the expected output being what you <em>want</em> to happen, not necessarily what your function does.</p>
<p>You’ll want cases where you know the correct answer. Start simple.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Only write tests now
</div>
</div>
<div class="callout-body-container callout-body">
<p>For now don’t modify your code even if you start to suspect how it might fail. Writing the tests and then modifying code so they pass is an example of <em>test-driven development</em>.</p>
</div>
</div>
</section>
<section id="exercise-error-trapping-robust-code-and-defensive-programming" class="level2">
<h2 class="anchored" data-anchor-id="exercise-error-trapping-robust-code-and-defensive-programming">Exercise: Error trapping, robust code, and defensive programming</h2>
<p>Now we’ll try to go beyond simply returning a failed result and see if we can trap problems early on and write more robust code.</p>
<p>Work on the following improvements:</p>
<ul>
<li>Check user inputs are valid.</li>
<li>Add warnings to the user if it seems that Newton’s method is taking a bad step.</li>
<li>Modify your function so that when it fails, the result is informative to the user.
<ul>
<li>Include a success/failure code (flag) in your output.</li>
</ul></li>
</ul>
<p>We don’t have time to go fully into how Python handles errors (called exceptions). Here are a few basic things you can do to <em>raise</em> an <em>exception</em> (i.e., to report an error):</p>
<pre><code>if not callable(f):
   raise TypeError(f"Argument is not a function, it is of type {type(f)}")</code></pre>
<pre><code>if x &gt; 1e7:
   raise RuntimeError(f"At iteration {iter}, optimization appears to be diverging")</code></pre>
<pre><code>import warnings
if x &gt; 3:
   warnings.warn(f"{x} is greater than 3.")</code></pre>
<p>Next, if you have time, consider robustifying your code if you have time:</p>
<ul>
<li>What might you do if the next step is worse than the current position?<br>
</li>
<li>What might you do if the next step is outside the range of potential values (assuming a unimodal function)?</li>
</ul>
</section>
</section>
<section id="multi-user-git" class="level1">
<h1>7. Multi-user Git</h1>
<p>Once you are working on more complicated projects and particularly when working with multiple people, you’ll want to be able to use branches and pull requests (PRs) to manage the work.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why use branches and pull requests?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>Experiment without worrying about breaking the current code.</li>
<li>Test your code before finalizing changes (particularly with testing via continuous integration / GitHub Actions).</li>
<li>Organize aspects of the project for clarity and collaboration.</li>
<li>Manage collaboration:
<ul>
<li>Manage code contributions from others.</li>
<li>Discuss changes.</li>
<li>Keep track of changes.</li>
<li>Accept external contributions.</li>
<li>Resolve conflicts between different changes.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<p>Before going further, let’s review our visualization of working with Git (<a href="https://docs.google.com/presentation/d/1YlM3boYLE8DwbxGNO3ZVVt3e9gEoBgD1uc9RtItUYCU">online version</a>, <a href="git_visuals.pdf">PDF version</a>)</p>
<section id="demo-branching-and-pull-requests-merge-conflicts" class="level2">
<h2 class="anchored" data-anchor-id="demo-branching-and-pull-requests-merge-conflicts">Demo: Branching and pull requests, merge conflicts</h2>
<p>We’ll demo the use of branching and PRs by fixing our <code>binary_search</code> function.</p>
<section id="branching" class="level3">
<h3 class="anchored" data-anchor-id="branching">Branching</h3>
<p>First, let’s fix the error in our <code>binary_search</code> function in a new branch.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> switch <span class="at">-c</span> fix_midpoint_bug</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We’ll now make the fixes and do the linting (not shown).</p>
<p>Push the branch with the fix to GitHub.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add binary_search.py</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span><span class="st">"Fix bug in handling midpoint.</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="st">Lint code."</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin fix_midpoint_bug</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pull-requests" class="level3">
<h3 class="anchored" data-anchor-id="pull-requests">Pull requests</h3>
<p>Now we’ll go to GitHub and start a pull request (PR).</p>
<p>Since we’re the ones who control the repo, we’ll also review and merge in the PR.</p>
</section>
<section id="merge-conflicts" class="level3">
<h3 class="anchored" data-anchor-id="merge-conflicts">Merge conflicts</h3>
<p>Next let’s see a basic example of a <em>merge conflict</em>, which occurs when two commits modify (which could include deletion) the same line in a file. In this case Git requires the user to figure out what should be done.</p>
<p>To get an example, we need to create a conflict. I will add different documentation in the <code>main</code> and <code>fix_midpoint_bug</code> branches. After pushing the <code>main</code> change, I’ll try to do a PR with the <code>fix_midpoint_bug</code>.</p>
<p>The GitHub UI does a nice job of helping you resolve merge conflicts, as we’ll see.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resolving conflicts at the command line
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can also get (and resolve) merge conflicts on the command line. Git will add some syntax to the conflicted file pointing out the conflicts that need to be resolved. Once you edit the conflicted file to fix the conflict, you can do <code>git add &lt;name_of_file&gt;</code> and then <code>git commit</code>.</p>
</div>
</div>
</section>
</section>
<section id="multivariate-newtons-method" class="level2">
<h2 class="anchored" data-anchor-id="multivariate-newtons-method">Multivariate Newton’s method</h2>
<p>Recall that Newton’s method optimizes some objective function, <span class="math inline">\(f(x)\)</span> as a function of univariate or multivariate <span class="math inline">\(x\)</span>, where <span class="math inline">\(f(x)\)</span> is univariate.</p>
<p>The multivariate method extends the univariate, using the gradient (first derivative) vector and Hessian (second derivative) matrix.</p>
<p>If we are at step <span class="math inline">\(t-1\)</span>, the next value is:</p>
<p><span class="math display">\[
x_{t+1}=x_{t}-H_{f}(x_{t})^{-1}\nabla f(x_{t})
\]</span></p>
<p>where <span class="math inline">\(\nabla f(x_{t}\)</span> is the gradient (first derivative with respect to each element of <span class="math inline">\(x\)</span>) and <span class="math inline">\(H_{f}(x_{t})\)</span> is the Hessian matrix (second derivatives with respect to all pairs of the elements of <span class="math inline">\(x\)</span>).</p>
<p>Here are the steps:</p>
<ul>
<li>determine a starting value, <span class="math inline">\(x_0\)</span>.</li>
<li>iterate:
<ul>
<li>at step <span class="math inline">\(t\)</span>, the next value (the update) is given by the equation above</li>
<li>stop when <span class="math inline">\(\left\Vert x_{t} - x_{t-1} \right\Vert\)</span> is “small”</li>
</ul></li>
</ul>
</section>
<section id="exercise-branching" class="level2">
<h2 class="anchored" data-anchor-id="exercise-branching">Exercise: Branching</h2>
<p>Working with a partner:</p>
<ol type="1">
<li>Choose either your repository or your partner’s repository to continue working in.</li>
<li>Make a branch (called <code>multivariate</code>) in which you’ll implement the multivariate version of Newton’s method (see details above)</li>
<li>Implement the algorithm.</li>
</ol>
<p>At this point, if we think about calculating the Hessian it starts to feel more tedious to deal with the finite difference calculations, though it is a straightforward extension of what you already implemented. Feel free to look online to find a Python package that implements finite difference estimation of derivatives and use that in your code.</p>
<p>As you are writing the code, you can continue to think about what might go wrong and include defensive programming tactics.</p>
</section>
<section id="exercise-pull-requests-prs" class="level2">
<h2 class="anchored" data-anchor-id="exercise-pull-requests-prs">Exercise: Pull requests (PRs)</h2>
<p>When you have your branch ready, make a pull request:</p>
<ol type="1">
<li><p>Make a pull request into the remote for the repository by pushing the branch to GitHub</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin multivariate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Go to GitHub to the <code>Pull requests</code> tab and make the PR, making a note of what the PR is about.</p></li>
</ol>
<p>Don’t (yet) merge in the PR. We want someone else to review it to have additional eyes on the code.</p>
</section>
<section id="exercise-code-review-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-code-review-1">Exercise: Code review</h2>
<p>Now you and your partner should find a separate group with which to work on code reviews as a “supergroup”.</p>
<p>Give the other group the URL for your repository on GitHub and ask them to look at the PR. In turn get the URL for their repository.</p>
<p>In reviewing the PR, make comments in the PR comment/conversation area on GitHub. You and your partner can work together to make comments or you can each make separate comments.</p>
<p>If you have time, explore these two additional options for making comments:</p>
<ol type="1">
<li>Review changes:
<ul>
<li>Click on the <code>Files changed</code> tab (or go to <code>https://github.com/&lt;USERNAME&gt;/newton-practice/pull/&lt;PULL_ID&gt;/files</code> for the specific “PULL_ID”).</li>
<li>Click on the <code>Review changes</code> button.</li>
</ul></li>
<li>Make comments on specific lines
<ul>
<li>Click on the <code>Files changed</code> tab (or go to <code>https://github.com/&lt;USERNAME&gt;/newton-practice/pull/&lt;PULL_ID&gt;/files</code> for the specific “PULL_ID”).</li>
<li>Hover over a specific line in a specific file with your mouse. A blue “plus” box should appear. Click on the plus to add a comment.</li>
<li>Click on <code>Add single comment</code> or optionally experiment with <code>Start a review</code>.</li>
</ul></li>
</ol>
</section>
<section id="exercise-merge-the-pr" class="level2">
<h2 class="anchored" data-anchor-id="exercise-merge-the-pr">Exercise: Merge the PR</h2>
<p>Once you’ve seen the review by the other group, with your partner:</p>
<ul>
<li>On DataHub, make changes to the branch that was used in the pull request.
<ul>
<li>Alternatively, you could make the changes directly on GitHub using its editing capabilities.</li>
</ul></li>
<li>On DataHub, commit and push to GitHub.</li>
<li>On GitHub, merge in the pull request and close the request.
<ul>
<li>You may want to delete the branch. This helps avoid having a profusion of unneeded branches.</li>
</ul></li>
<li>On DataHub, run <code>git pull</code> to get the changes updated in the <code>main</code> branch of your local repository.</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The full cycle of “git virtue”
</div>
</div>
<div class="callout-body-container callout-body">
<p>Congratulations. In the course of the day, you’ve worked through the steps of complete, albeit small, project using an extensive set of concepts, skills, and tools used in real world projects.</p>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/berkeley-scf\.github\.io\/compute-skills-2024");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb35" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Version control, programming, and testing"</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cosmo</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">    css: ../styles.css</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-block-background: true</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">  freeze: auto</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>::: {.callout-warning}</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="fu">## DRAFT CONTENT (2024-08-01)</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>This module is drafted but still under construction.</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true"}</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="fu">## CJP development notes</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>links:</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://software-carpentry.org/lessons/</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://ucb-stat-159-s23.github.io/site (/var/tmp/site/lectures/intro-git)</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://docs.google.com/document/d/1osbFw5hTnt7wH7xnm_lIf2l0Ffn5c-xHyPEssbBvGXo/edit</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>export GIT_CONFIG_NOSYSTEM=1</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>NOTES:</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>might need to set merging policy:</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>install ruff in DataHub and on SCF</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## Overview</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>This module presents the core content of the workshop on version control (using Git), code style, documentation, and testing.</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a><span class="fu"># 1. Our running example: Newton's method for optimization</span></span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a><span class="fu">## Newton's method background</span></span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>We'll use a running example, Newton's method for optimization, during this workshop. It's simple enough to be straightforward to code but can involve various modifications, extensions, etc. to be a rich enough example that we can use it to demonstrate various topics and tools.</span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>Recall that Newton's method works as follows to optimize some objective function, $f(x)$, as a function of univariate or multivariate $x$, where $f(x)$ is univariate. </span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a>Newton's method is iterative. If we are at step $t-1$, the next value (when minimizing a function) is:</span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a>x_t = x_{t-1} - f^{\prime}(x_{t-1}) / f^{\prime\prime}(x_{t-1})</span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a>Here are the steps:</span>
<span id="cb35-62"><a href="#cb35-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-63"><a href="#cb35-63" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>determine a starting value, $x_0$</span>
<span id="cb35-64"><a href="#cb35-64" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>iterate:</span>
<span id="cb35-65"><a href="#cb35-65" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>at step $t$, the next value (the update) is given by the equation above</span>
<span id="cb35-66"><a href="#cb35-66" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>stop when $\left\Vert x_{t} - x_{t-1} \right\Vert$ is "small"</span>
<span id="cb35-67"><a href="#cb35-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-68"><a href="#cb35-68" aria-hidden="true" tabindex="-1"></a>You can derive it by finding the root of the gradient function using a Taylor series approximation to the gradient.</span>
<span id="cb35-69"><a href="#cb35-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-70"><a href="#cb35-70" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Implement univariate Newton's method</span></span>
<span id="cb35-71"><a href="#cb35-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-72"><a href="#cb35-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-73"><a href="#cb35-73" aria-hidden="true" tabindex="-1"></a>Here's what you'll need your code to do:</span>
<span id="cb35-74"><a href="#cb35-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-75"><a href="#cb35-75" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>accept a starting value, $x_0$, and the function, $f(\cdot)$, to optimize</span>
<span id="cb35-76"><a href="#cb35-76" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>implement the iterative algorithm</span>
<span id="cb35-77"><a href="#cb35-77" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>implement the stopping criterion (feel free to keep this simple)</span>
<span id="cb35-78"><a href="#cb35-78" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>calculate the first and second derivatives using a basic finite difference approach to estimating the derivative based on the definition of a derivative as a limit</span>
<span id="cb35-79"><a href="#cb35-79" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>note that the second derivative can be seen as calling the first derivative twice...</span>
<span id="cb35-80"><a href="#cb35-80" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>consider what to return as the output (feel free to keep it simple)</span>
<span id="cb35-81"><a href="#cb35-81" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>don't worry much for now about making your code robust or dealing with tricky situations</span>
<span id="cb35-82"><a href="#cb35-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-83"><a href="#cb35-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-84"><a href="#cb35-84" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb35-85"><a href="#cb35-85" aria-hidden="true" tabindex="-1"></a>::: {.callout-warning}</span>
<span id="cb35-86"><a href="#cb35-86" aria-hidden="true" tabindex="-1"></a>Don't make your finite difference ("epsilon") too small or you'll actually get inaccurate estimates. (We'll discuss why when we talk a bit out numerical issues in computing later.)</span>
<span id="cb35-87"><a href="#cb35-87" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-88"><a href="#cb35-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-89"><a href="#cb35-89" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-90"><a href="#cb35-90" aria-hidden="true" tabindex="-1"></a>For now, please do not use any Python packages that provide finite difference-based derivatives (we'll do that later, and it's helpful to have more code available for the work we'll do today).</span>
<span id="cb35-91"><a href="#cb35-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-92"><a href="#cb35-92" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-93"><a href="#cb35-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-94"><a href="#cb35-94" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb35-95"><a href="#cb35-95" aria-hidden="true" tabindex="-1"></a>You're welcome to develop your code in a Notebook or in the DataHub editor or in a separate editor on your laptop.</span>
<span id="cb35-96"><a href="#cb35-96" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-97"><a href="#cb35-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-98"><a href="#cb35-98" aria-hidden="true" tabindex="-1"></a>Once you've written your Python functions, put your code into a simple text file, called <span class="in">`newton.py`</span>. In doing so you've created a Python *module*. Once you have your module, you can use it like this:</span>
<span id="cb35-99"><a href="#cb35-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-102"><a href="#cb35-102" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb35-103"><a href="#cb35-103" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb35-104"><a href="#cb35-104" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> newton</span>
<span id="cb35-105"><a href="#cb35-105" aria-hidden="true" tabindex="-1"></a>newton.optimize(start, fun)   <span class="co">## Assuming your function is called `optimize`.</span></span>
<span id="cb35-106"><a href="#cb35-106" aria-hidden="true" tabindex="-1"></a>newton.optimize(<span class="fl">2.5</span>, np.cos)  <span class="co">## Minimizing cos(x) from close-ish to one minimum.</span></span>
<span id="cb35-107"><a href="#cb35-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-108"><a href="#cb35-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-109"><a href="#cb35-109" aria-hidden="true" tabindex="-1"></a>A *module* is a collection of related code in a file with the extension <span class="in">`.py`</span>.</span>
<span id="cb35-110"><a href="#cb35-110" aria-hidden="true" tabindex="-1"></a>The code can include functions, classes, and variables, as well as</span>
<span id="cb35-111"><a href="#cb35-111" aria-hidden="true" tabindex="-1"></a>runnable code. To access the objects in the module, you need to import the module.</span>
<span id="cb35-112"><a href="#cb35-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-113"><a href="#cb35-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-114"><a href="#cb35-114" aria-hidden="true" tabindex="-1"></a><span class="fu"># 2. Introduction to Git and GitHub</span></span>
<span id="cb35-115"><a href="#cb35-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-116"><a href="#cb35-116" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Creating a Git repository (on GitHub)</span></span>
<span id="cb35-117"><a href="#cb35-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-118"><a href="#cb35-118" aria-hidden="true" tabindex="-1"></a>Go to <span class="in">`github.com/&lt;your_username&gt;`</span> and click on the <span class="in">`Repositories`</span> tag. Then click on the <span class="in">`New`</span> button.</span>
<span id="cb35-119"><a href="#cb35-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-120"><a href="#cb35-120" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>In the form, give the repository the name <span class="in">`newton-practice`</span> (so others who are working with you can find it easily)</span>
<span id="cb35-121"><a href="#cb35-121" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Provide a short description</span>
<span id="cb35-122"><a href="#cb35-122" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Click on "Add a README file".</span>
<span id="cb35-123"><a href="#cb35-123" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Leave the repository as "Public" so that others can interact with your repository when we practice later.</span>
<span id="cb35-124"><a href="#cb35-124" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Scroll down to <span class="in">`Python`</span> under <span class="in">`Add .gitignore`</span>.</span>
<span id="cb35-125"><a href="#cb35-125" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Select a license (the BSD 3 Clause license is a good "permissive" one).</span>
<span id="cb35-126"><a href="#cb35-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-127"><a href="#cb35-127" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-128"><a href="#cb35-128" aria-hidden="true" tabindex="-1"></a><span class="fu">## Creating repositories on your laptop first</span></span>
<span id="cb35-129"><a href="#cb35-129" aria-hidden="true" tabindex="-1"></a>It's also possible to <span class="co">[</span><span class="ot">create the repository from the terminal on your machine</span><span class="co">](https://docs.github.com/en/migrations/importing-source-code/using-the-command-line-to-import-source-code/adding-locally-hosted-code-to-github#initializing-a-git-repository)</span> and then link it to your GitHub account, but that's a couple extra steps we won't go into here at the moment.</span>
<span id="cb35-130"><a href="#cb35-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-131"><a href="#cb35-131" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-132"><a href="#cb35-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-133"><a href="#cb35-133" aria-hidden="true" tabindex="-1"></a><span class="fu">## Accessing  GitHub repositories from JupyterHub</span></span>
<span id="cb35-134"><a href="#cb35-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-135"><a href="#cb35-135" aria-hidden="true" tabindex="-1"></a>Authenticating with GitHub can be a bit tricky, particularly when using DataHub (i.e., JupyterHub).</span>
<span id="cb35-136"><a href="#cb35-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-137"><a href="#cb35-137" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-138"><a href="#cb35-138" aria-hidden="true" tabindex="-1"></a><span class="fu">## Accessing GitHub from your laptop rather than DataHub</span></span>
<span id="cb35-139"><a href="#cb35-139" aria-hidden="true" tabindex="-1"></a>If you're on your laptop and already set up to use GitHub, you don't need to do the steps in this section,</span>
<span id="cb35-140"><a href="#cb35-140" aria-hidden="true" tabindex="-1"></a>but if you're using your laptop and not set up to use GitHub, these instructions should work there too.</span>
<span id="cb35-141"><a href="#cb35-141" aria-hidden="true" tabindex="-1"></a>(it may also depend on the version of <span class="in">`git`</span> you are using; e.g., version 2.34.1 is too old but 2.39 should be fine).</span>
<span id="cb35-142"><a href="#cb35-142" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-143"><a href="#cb35-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-144"><a href="#cb35-144" aria-hidden="true" tabindex="-1"></a>We'll use a tool (an 'app') that helps us with this, provided in the <span class="in">`gh_scoped_creds`</span> Python package.</span>
<span id="cb35-145"><a href="#cb35-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-146"><a href="#cb35-146" aria-hidden="true" tabindex="-1"></a>First configure git in the terminal:</span>
<span id="cb35-147"><a href="#cb35-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-148"><a href="#cb35-148" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-149"><a href="#cb35-149" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name <span class="st">"Jane Doe"</span></span>
<span id="cb35-150"><a href="#cb35-150" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email <span class="st">"jane_doe@berkeley.edu"</span></span>
<span id="cb35-151"><a href="#cb35-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-152"><a href="#cb35-152" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> color.ui <span class="st">"auto"</span></span>
<span id="cb35-153"><a href="#cb35-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-154"><a href="#cb35-154" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> pull.rebase false</span>
<span id="cb35-155"><a href="#cb35-155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-156"><a href="#cb35-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-157"><a href="#cb35-157" aria-hidden="true" tabindex="-1"></a>That will modify your <span class="in">`~/.gitconfig`</span> file. </span>
<span id="cb35-158"><a href="#cb35-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-159"><a href="#cb35-159" aria-hidden="true" tabindex="-1"></a>Then run this in the terminal:</span>
<span id="cb35-160"><a href="#cb35-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-161"><a href="#cb35-161" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-162"><a href="#cb35-162" aria-hidden="true" tabindex="-1"></a><span class="ex">gh-scoped-creds</span></span>
<span id="cb35-163"><a href="#cb35-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-164"><a href="#cb35-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-165"><a href="#cb35-165" aria-hidden="true" tabindex="-1"></a>Or you could instead run this in IPython or Jupyter Notebook:</span>
<span id="cb35-166"><a href="#cb35-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-169"><a href="#cb35-169" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb35-170"><a href="#cb35-170" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb35-171"><a href="#cb35-171" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> gh_scoped_creds</span>
<span id="cb35-172"><a href="#cb35-172" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>ghscopedcreds</span>
<span id="cb35-173"><a href="#cb35-173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-174"><a href="#cb35-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-175"><a href="#cb35-175" aria-hidden="true" tabindex="-1"></a>When you do that you'll see a <span class="co">[</span><span class="ot">link</span><span class="co">](https://github.com/login/device)</span> and a code. Go to the link in a browser (on your laptop, outside of DataHub), click <span class="in">`Continue`</span>, input the code, and click <span class="in">`Authorize Berkeley-Datahub-Git-Access`</span>. This will grant access to GitHub from JupyterHub for 8 hours (or until you stop your JupyterHub server).</span>
<span id="cb35-176"><a href="#cb35-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-177"><a href="#cb35-177" aria-hidden="true" tabindex="-1"></a>Then (only the first time you are doing all this) go to the URL that is printed out (which should be <span class="ot">&lt;https://github.com/apps/stat-computing-jupyterhub)&gt;</span> and click on <span class="in">`Install`</span> (and then if you have access to multiple GitHub organizations, choose your personal org, namely your GitHub username). Choose <span class="in">`Only select repositories`</span> and select the repository you are using for the workshop, namely <span class="in">`newton-practice`</span>. Then click <span class="in">`Install`</span>.</span>
<span id="cb35-178"><a href="#cb35-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-179"><a href="#cb35-179" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">TODO: check the last set of instructions to make sure they are correct and easy to follow.</span><span class="co">]</span></span>
<span id="cb35-180"><a href="#cb35-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-181"><a href="#cb35-181" aria-hidden="true" tabindex="-1"></a><span class="fu">## Basic use of a repository</span></span>
<span id="cb35-182"><a href="#cb35-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-183"><a href="#cb35-183" aria-hidden="true" tabindex="-1"></a>In the terminal, let's make a small change to the README, register the change with Git (this is called a *commit*), and push the changes upstream to GitHub (which has the *remote* copy of the repository).</span>
<span id="cb35-184"><a href="#cb35-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-185"><a href="#cb35-185" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Step 1. Clone the repository</span></span>
<span id="cb35-186"><a href="#cb35-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-187"><a href="#cb35-187" aria-hidden="true" tabindex="-1"></a>First make a local copy of the repository from the remote on GitHub. It's best do this **outside** of the <span class="in">`compute-skills-2024`</span> directory; otherwise you'll have a repository nested within a repository. </span>
<span id="cb35-188"><a href="#cb35-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-189"><a href="#cb35-189" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-190"><a href="#cb35-190" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  <span class="co"># Avoid cloning into the `compute-skills-2024` repository.</span></span>
<span id="cb35-191"><a href="#cb35-191" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/<span class="op">&lt;</span>your_username<span class="op">&gt;</span>/newton-practice</span>
<span id="cb35-192"><a href="#cb35-192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-193"><a href="#cb35-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-194"><a href="#cb35-194" aria-hidden="true" tabindex="-1"></a>If we run this:</span>
<span id="cb35-195"><a href="#cb35-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-196"><a href="#cb35-196" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-197"><a href="#cb35-197" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> newton-practice</span>
<span id="cb35-198"><a href="#cb35-198" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> .git</span>
<span id="cb35-199"><a href="#cb35-199" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> .git/config</span>
<span id="cb35-200"><a href="#cb35-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-201"><a href="#cb35-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-202"><a href="#cb35-202" aria-hidden="true" tabindex="-1"></a>we should see a bunch of output (truncated here) indicating that <span class="in">`newton-practice`</span> is a Git repository, and that in this case the local repository is linked to a *remote* repository (the repository we created on GitHub):</span>
<span id="cb35-203"><a href="#cb35-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-204"><a href="#cb35-204" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-205"><a href="#cb35-205" aria-hidden="true" tabindex="-1"></a><span class="ex">total</span> 40</span>
<span id="cb35-206"><a href="#cb35-206" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 jovyan jovyan  264 Aug  2 15:04 config</span>
<span id="cb35-207"><a href="#cb35-207" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 jovyan jovyan   73 Aug  2 15:04 description</span>
<span id="cb35-208"><a href="#cb35-208" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span> 1 jovyan jovyan   21 Aug  2 15:04 HEAD</span>
<span id="cb35-209"><a href="#cb35-209" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span>   1 paciorek scfstaff   16 Jul 24 14:48 COMMIT_EDITMSG</span>
<span id="cb35-210"><a href="#cb35-210" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-r--r--</span>   1 paciorek scfstaff  656 Jul 23 18:20 config</span>
<span id="cb35-211"><a href="#cb35-211" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span>
<span id="cb35-212"><a href="#cb35-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-213"><a href="#cb35-213" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span>
<span id="cb35-214"><a href="#cb35-214" aria-hidden="true" tabindex="-1"></a><span class="ex">[remote</span> <span class="st">"origin"</span>]</span>
<span id="cb35-215"><a href="#cb35-215" aria-hidden="true" tabindex="-1"></a>        <span class="ex">url</span> = https://github.com/paciorek/newton-practice</span>
<span id="cb35-216"><a href="#cb35-216" aria-hidden="true" tabindex="-1"></a>        <span class="ex">fetch</span> = +refs/heads/<span class="pp">*</span>:refs/remotes/origin/<span class="pp">*</span></span>
<span id="cb35-217"><a href="#cb35-217" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>snip<span class="op">&gt;</span></span>
<span id="cb35-218"><a href="#cb35-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-219"><a href="#cb35-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-220"><a href="#cb35-220" aria-hidden="true" tabindex="-1"></a>Step 2. Add files</span>
<span id="cb35-221"><a href="#cb35-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-222"><a href="#cb35-222" aria-hidden="true" tabindex="-1"></a>Next move (or copy) your Python module into the repository directory. I'll use the test module that we'll work with later, but you'll do it with your Newton method module.</span>
<span id="cb35-223"><a href="#cb35-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-224"><a href="#cb35-224" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-225"><a href="#cb35-225" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> newton-practice</span>
<span id="cb35-226"><a href="#cb35-226" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> ../compute-skills-2024/units/binary_search.py .</span>
<span id="cb35-227"><a href="#cb35-227" aria-hidden="true" tabindex="-1"></a><span class="co">## Tell git to track the file</span></span>
<span id="cb35-228"><a href="#cb35-228" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add binary_search.py</span>
<span id="cb35-229"><a href="#cb35-229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-230"><a href="#cb35-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-231"><a href="#cb35-231" aria-hidden="true" tabindex="-1"></a>Step 3. Edit file(s)</span>
<span id="cb35-232"><a href="#cb35-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-233"><a href="#cb35-233" aria-hidden="true" tabindex="-1"></a>Edit the README file to indicate that the repository has a basic implementation</span>
<span id="cb35-234"><a href="#cb35-234" aria-hidden="true" tabindex="-1"></a>of Newton's method. (In DataHub, you can double-click on the README in the file manager</span>
<span id="cb35-235"><a href="#cb35-235" aria-hidden="true" tabindex="-1"></a>pane.)</span>
<span id="cb35-236"><a href="#cb35-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-237"><a href="#cb35-237" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-238"><a href="#cb35-238" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb35-239"><a href="#cb35-239" aria-hidden="true" tabindex="-1"></a><span class="co">## Tell git to keep track of the changes to the file.</span></span>
<span id="cb35-240"><a href="#cb35-240" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add README.md</span>
<span id="cb35-241"><a href="#cb35-241" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb35-242"><a href="#cb35-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-243"><a href="#cb35-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-244"><a href="#cb35-244" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-245"><a href="#cb35-245" aria-hidden="true" tabindex="-1"></a><span class="co">## Register the changes with Git.</span></span>
<span id="cb35-246"><a href="#cb35-246" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span><span class="st">"Add basic implementation of Newton's method."</span></span>
<span id="cb35-247"><a href="#cb35-247" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb35-248"><a href="#cb35-248" aria-hidden="true" tabindex="-1"></a><span class="co">## Synchronize the changes with the remote.</span></span>
<span id="cb35-249"><a href="#cb35-249" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span>
<span id="cb35-250"><a href="#cb35-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-251"><a href="#cb35-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-252"><a href="#cb35-252" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-253"><a href="#cb35-253" aria-hidden="true" tabindex="-1"></a>We could have cloned the (public) repository without the <span class="in">`gh_scoped_creds`</span> credentials stuff earlier, but if we tried to push to it, we would have been faced with GitHub asking for our password, which would have required us to create a GitHub authentication token that we would paste in.</span>
<span id="cb35-254"><a href="#cb35-254" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-255"><a href="#cb35-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-256"><a href="#cb35-256" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-257"><a href="#cb35-257" aria-hidden="true" tabindex="-1"></a>Instead of having to <span class="in">`add`</span> files that already part of the repository (such as <span class="in">`README.md`</span>) we could do:</span>
<span id="cb35-258"><a href="#cb35-258" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-259"><a href="#cb35-259" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-a</span> <span class="at">-m</span><span class="st">"Update README."</span></span>
<span id="cb35-260"><a href="#cb35-260" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-261"><a href="#cb35-261" aria-hidden="true" tabindex="-1"></a>We do need to explicitly add any **new** files (e.g., <span class="in">`newton.py`</span>) that are not yet registered with git via <span class="in">`git add`</span>.</span>
<span id="cb35-262"><a href="#cb35-262" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-263"><a href="#cb35-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-264"><a href="#cb35-264" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-265"><a href="#cb35-265" aria-hidden="true" tabindex="-1"></a>You can also edit and add files directly to your GitHub repository in a browser window. This is a good backup if you run into problems making commits from DataHub or your laptop.</span>
<span id="cb35-266"><a href="#cb35-266" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-267"><a href="#cb35-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-268"><a href="#cb35-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-269"><a href="#cb35-269" aria-hidden="true" tabindex="-1"></a><span class="fu">### Writing good commit messages</span></span>
<span id="cb35-270"><a href="#cb35-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-271"><a href="#cb35-271" aria-hidden="true" tabindex="-1"></a>Some tips:</span>
<span id="cb35-272"><a href="#cb35-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-273"><a href="#cb35-273" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Concisely describe what changed (and for more complicated situations, why), not how.</span>
<span id="cb35-274"><a href="#cb35-274" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Two options (depending on whether the commit makes one or more changes):</span>
<span id="cb35-275"><a href="#cb35-275" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Keep it short (one line, &lt;72 characters)</span>
<span id="cb35-276"><a href="#cb35-276" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Have a subject line separated from the body by a blank line.</span>
<span id="cb35-277"><a href="#cb35-277" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>Keep subject to 50 characters and each body line to 72 characters.</span>
<span id="cb35-278"><a href="#cb35-278" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>Best to edit message in an editor -- omit the <span class="in">`-m`</span> flag to <span class="in">`git commit`</span>.</span>
<span id="cb35-279"><a href="#cb35-279" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>If you're working on a project with GitHub issues, reference the issue at the bottom.</span>
<span id="cb35-280"><a href="#cb35-280" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Start each item in the message with a verb (present tense) and provide a complete sentence.</span>
<span id="cb35-281"><a href="#cb35-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-282"><a href="#cb35-282" aria-hidden="true" tabindex="-1"></a>If you find your commit message is covering multiple topics, it probably means you should</span>
<span id="cb35-283"><a href="#cb35-283" aria-hidden="true" tabindex="-1"></a>have made multiple ("atomic") commits.</span>
<span id="cb35-284"><a href="#cb35-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-285"><a href="#cb35-285" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: code review</span></span>
<span id="cb35-286"><a href="#cb35-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-287"><a href="#cb35-287" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Step 1: Make suggestions</span></span>
<span id="cb35-288"><a href="#cb35-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-289"><a href="#cb35-289" aria-hidden="true" tabindex="-1"></a>Go to your partner's repository at <span class="in">`https://github.com/&lt;user_name&gt;/newton-practice`</span>.</span>
<span id="cb35-290"><a href="#cb35-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-291"><a href="#cb35-291" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Look over their code.</span>
<span id="cb35-292"><a href="#cb35-292" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Make some comments/suggestions in a new GitHub issue (go to the <span class="in">`Issues`</span> button and click on <span class="in">`New issue`</span>).</span>
<span id="cb35-293"><a href="#cb35-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-294"><a href="#cb35-294" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Step 2: Respond to suggestions</span></span>
<span id="cb35-295"><a href="#cb35-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-296"><a href="#cb35-296" aria-hidden="true" tabindex="-1"></a>In response to your partner's comments, make some small change(s) to your <span class="in">`newton.py`</span> code.</span>
<span id="cb35-297"><a href="#cb35-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-298"><a href="#cb35-298" aria-hidden="true" tabindex="-1"></a>You can do this in DataHub (or locally on your laptop if that's what you're doing) and make a commit as we did in the previous exercise.</span>
<span id="cb35-299"><a href="#cb35-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-300"><a href="#cb35-300" aria-hidden="true" tabindex="-1"></a>Or you can do the editing in your GitHub browser window by clicking on the file and choosing the pencil icon (far right) to edit it. When you save it, a commit will be made. Make sure to provide a commit message. You can also create new files via the <span class="in">`+`</span> button in the top of the left sidebar. If you make changes directly on GitHub, you'll also want to run <span class="in">`git pull`</span> to pull down the changes to your local repository on DataHub or your laptop.</span>
<span id="cb35-301"><a href="#cb35-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-302"><a href="#cb35-302" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3. Understanding Git</span></span>
<span id="cb35-303"><a href="#cb35-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-304"><a href="#cb35-304" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb35-305"><a href="#cb35-305" aria-hidden="true" tabindex="-1"></a><span class="fu">## More than the syntax</span></span>
<span id="cb35-306"><a href="#cb35-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-307"><a href="#cb35-307" aria-hidden="true" tabindex="-1"></a>So far we've just introduced Git by its mechanics/syntax. This is ok (but not ideal) for basic one-person operation, but to really use Git effectively you need to understand conceptually how it works.</span>
<span id="cb35-308"><a href="#cb35-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-309"><a href="#cb35-309" aria-hidden="true" tabindex="-1"></a>More generally if you understand things conceptually, then looking up the syntax of a command or the mechanics of how to do something will be straightforward.</span>
<span id="cb35-310"><a href="#cb35-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-311"><a href="#cb35-311" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-312"><a href="#cb35-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-313"><a href="#cb35-313" aria-hidden="true" tabindex="-1"></a>We'll start with some visuals and then go back to some Git terminology and to the structure of a repository.</span>
<span id="cb35-314"><a href="#cb35-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-315"><a href="#cb35-315" aria-hidden="true" tabindex="-1"></a><span class="fu">## Git visuals: Understanding Git concepts</span></span>
<span id="cb35-316"><a href="#cb35-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-317"><a href="#cb35-317" aria-hidden="true" tabindex="-1"></a>Fernando Perez has nice visualization (<span class="co">[</span><span class="ot">online version</span><span class="co">](https://docs.google.com/presentation/d/1YlM3boYLE8DwbxGNO3ZVVt3e9gEoBgD1uc9RtItUYCU)</span>, <span class="co">[</span><span class="ot">PDF version</span><span class="co">](git_visuals.pdf)</span>) of a basic Git workflow that we'll walk through.</span>
<span id="cb35-318"><a href="#cb35-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-319"><a href="#cb35-319" aria-hidden="true" tabindex="-1"></a>Note that we haven't actually seen in prtacie some of what is shown in the visual: tags, branches, and merging, but we'll be using those ideas later.</span>
<span id="cb35-320"><a href="#cb35-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-321"><a href="#cb35-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-322"><a href="#cb35-322" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key components and terminology</span></span>
<span id="cb35-323"><a href="#cb35-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-324"><a href="#cb35-324" aria-hidden="true" tabindex="-1"></a><span class="fu">### Commits</span></span>
<span id="cb35-325"><a href="#cb35-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-326"><a href="#cb35-326" aria-hidden="true" tabindex="-1"></a>A *commit* is a snapshot of our work at a point in time. So far in our own repository, we've been working with a linear sequence of snapshots, but the visualization showed that we can actually have a directed acyclic graph (DAG) of snapshots once we have *branches*.</span>
<span id="cb35-327"><a href="#cb35-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-328"><a href="#cb35-328" aria-hidden="true" tabindex="-1"></a>Each commit has:</span>
<span id="cb35-329"><a href="#cb35-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-330"><a href="#cb35-330" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>a hash identifier - a unique identifier produced by hashing the changes introduced in the commit and also the parent commit,</span>
<span id="cb35-331"><a href="#cb35-331" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>hashes of the files in the repository in their current state, and</span>
<span id="cb35-332"><a href="#cb35-332" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>the changes (based on the <span class="in">`diff`</span> tool) relative to the parent commit.</span>
<span id="cb35-333"><a href="#cb35-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-334"><a href="#cb35-334" aria-hidden="true" tabindex="-1"></a><span class="al">![A Git commit (Credit: ProGit book, CC License)](commit.png)</span></span>
<span id="cb35-335"><a href="#cb35-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-336"><a href="#cb35-336" aria-hidden="true" tabindex="-1"></a><span class="fu">### A repository</span></span>
<span id="cb35-337"><a href="#cb35-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-338"><a href="#cb35-338" aria-hidden="true" tabindex="-1"></a>A *repository* is the set of files for a project with their history. It's a collection of commits in the form of an directed acyclic graph.</span>
<span id="cb35-339"><a href="#cb35-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-340"><a href="#cb35-340" aria-hidden="true" tabindex="-1"></a><span class="al">![A (simple) Git repository (Credit: ProGit book, CC License)](tree.png)</span></span>
<span id="cb35-341"><a href="#cb35-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-342"><a href="#cb35-342" aria-hidden="true" tabindex="-1"></a>Some other terms:</span>
<span id="cb35-343"><a href="#cb35-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-344"><a href="#cb35-344" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>HEAD: a pointer to the current commit</span>
<span id="cb35-345"><a href="#cb35-345" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>tag: a label for a commit</span>
<span id="cb35-346"><a href="#cb35-346" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>branch: a commit - often indicating a commit that has "branched" off of some main workflow or some linear sequence of commits</span>
<span id="cb35-347"><a href="#cb35-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-348"><a href="#cb35-348" aria-hidden="true" tabindex="-1"></a><span class="fu">### Staging area / index</span></span>
<span id="cb35-349"><a href="#cb35-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-350"><a href="#cb35-350" aria-hidden="true" tabindex="-1"></a>The index (staging area) keeps track of changes (made to tracked files) that are added, but that are not yet committed.</span>
<span id="cb35-351"><a href="#cb35-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-352"><a href="#cb35-352" aria-hidden="true" tabindex="-1"></a><span class="al">![local operations in a repository (Credit: ProGit book, CC License)](staging.png "Visualization of local operations in Git")</span></span>
<span id="cb35-353"><a href="#cb35-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-354"><a href="#cb35-354" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb35-355"><a href="#cb35-355" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rolling back changes (optional)</span></span>
<span id="cb35-356"><a href="#cb35-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-357"><a href="#cb35-357" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset}</span>
<span id="cb35-358"><a href="#cb35-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-359"><a href="#cb35-359" aria-hidden="true" tabindex="-1"></a><span class="fu">## Uncommitted changes</span></span>
<span id="cb35-360"><a href="#cb35-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-361"><a href="#cb35-361" aria-hidden="true" tabindex="-1"></a>If I make some changes to a file that I decide are a mistaken, before <span class="in">`git add`</span> (i.e., before registering/staging the changes with <span class="in">`git`</span>), I can always still edit the file to undo the mistakes.</span>
<span id="cb35-362"><a href="#cb35-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-363"><a href="#cb35-363" aria-hidden="true" tabindex="-1"></a>But I can also go back to the version stored by Git.</span>
<span id="cb35-364"><a href="#cb35-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-365"><a href="#cb35-365" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-366"><a href="#cb35-366" aria-hidden="true" tabindex="-1"></a><span class="co"># git checkout -- file.txt  # This is older syntax.</span></span>
<span id="cb35-367"><a href="#cb35-367" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> restore file.txt</span>
<span id="cb35-368"><a href="#cb35-368" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-369"><a href="#cb35-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-370"><a href="#cb35-370" aria-hidden="true" tabindex="-1"></a><span class="fu">## Staged, uncommitted changes</span></span>
<span id="cb35-371"><a href="#cb35-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-372"><a href="#cb35-372" aria-hidden="true" tabindex="-1"></a>If we've added (staged) files via <span class="in">`git add`</span> but have not yet committed them,</span>
<span id="cb35-373"><a href="#cb35-373" aria-hidden="true" tabindex="-1"></a>the files are in the index (staging area). We can get those changes out</span>
<span id="cb35-374"><a href="#cb35-374" aria-hidden="true" tabindex="-1"></a>of the staging area like this:</span>
<span id="cb35-375"><a href="#cb35-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-376"><a href="#cb35-376" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-377"><a href="#cb35-377" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb35-378"><a href="#cb35-378" aria-hidden="true" tabindex="-1"></a><span class="co"># git reset HEAD file.txt  # This is older syntax.</span></span>
<span id="cb35-379"><a href="#cb35-379" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> restore <span class="at">--staged</span> file.txt</span>
<span id="cb35-380"><a href="#cb35-380" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb35-381"><a href="#cb35-381" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-382"><a href="#cb35-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-383"><a href="#cb35-383" aria-hidden="true" tabindex="-1"></a>Note that the changes still exist in <span class="in">`file.txt`</span> but they're no longer registered/staged with Git.</span>
<span id="cb35-384"><a href="#cb35-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-385"><a href="#cb35-385" aria-hidden="true" tabindex="-1"></a><span class="fu">## Committed changes</span></span>
<span id="cb35-386"><a href="#cb35-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-387"><a href="#cb35-387" aria-hidden="true" tabindex="-1"></a>Suppose you need to add or modify to your commit. This illustrates a few things you might do to update your commit.</span>
<span id="cb35-388"><a href="#cb35-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-389"><a href="#cb35-389" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-390"><a href="#cb35-390" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">'Initial commit'</span></span>
<span id="cb35-391"><a href="#cb35-391" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add forgotten_file.txt</span>
<span id="cb35-392"><a href="#cb35-392" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit file.txt.</span></span>
<span id="cb35-393"><a href="#cb35-393" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add file.txt</span>
<span id="cb35-394"><a href="#cb35-394" aria-hidden="true" tabindex="-1"></a><span class="co"># Get version of file from previous commit.</span></span>
<span id="cb35-395"><a href="#cb35-395" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="op">&lt;</span>commit_hash<span class="op">&gt;</span> file.txt</span>
<span id="cb35-396"><a href="#cb35-396" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">--amend</span></span>
<span id="cb35-397"><a href="#cb35-397" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-398"><a href="#cb35-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-399"><a href="#cb35-399" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pushed changes</span></span>
<span id="cb35-400"><a href="#cb35-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-401"><a href="#cb35-401" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-402"><a href="#cb35-402" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> revert <span class="op">&lt;</span>commit_hash<span class="op">&gt;</span></span>
<span id="cb35-403"><a href="#cb35-403" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span>
<span id="cb35-404"><a href="#cb35-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-405"><a href="#cb35-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-406"><a href="#cb35-406" aria-hidden="true" tabindex="-1"></a>Note that this creates a new commit that undoes the changes you don't want. So the undoing shows up in the history.</span>
<span id="cb35-407"><a href="#cb35-407" aria-hidden="true" tabindex="-1"></a>This is the safest option.</span>
<span id="cb35-408"><a href="#cb35-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-409"><a href="#cb35-409" aria-hidden="true" tabindex="-1"></a>If you're *sure* no one else has pulled your changes from the remote:</span>
<span id="cb35-410"><a href="#cb35-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-411"><a href="#cb35-411" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-412"><a href="#cb35-412" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> reset <span class="op">&lt;</span>commit_hash<span class="op">&gt;</span></span>
<span id="cb35-413"><a href="#cb35-413" aria-hidden="true" tabindex="-1"></a><span class="co"># Make changes</span></span>
<span id="cb35-414"><a href="#cb35-414" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-a</span> <span class="at">-m</span><span class="st">'reworked the mistake'</span></span>
<span id="cb35-415"><a href="#cb35-415" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-f</span> origin <span class="op">&lt;</span>branch_name<span class="op">&gt;</span></span>
<span id="cb35-416"><a href="#cb35-416" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-417"><a href="#cb35-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-418"><a href="#cb35-418" aria-hidden="true" tabindex="-1"></a>This will remove the previous commit at the remote (GitHub in our case). </span>
<span id="cb35-419"><a href="#cb35-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-420"><a href="#cb35-420" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-421"><a href="#cb35-421" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-422"><a href="#cb35-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-423"><a href="#cb35-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-424"><a href="#cb35-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-425"><a href="#cb35-425" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4. Code style and documentation</span></span>
<span id="cb35-426"><a href="#cb35-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-427"><a href="#cb35-427" aria-hidden="true" tabindex="-1"></a>Having a (reasonably) consistent and clean style, plus documentation, is important for being able to</span>
<span id="cb35-428"><a href="#cb35-428" aria-hidden="true" tabindex="-1"></a>read and maintain your code.</span>
<span id="cb35-429"><a href="#cb35-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-430"><a href="#cb35-430" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb35-431"><a href="#cb35-431" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q: Who is the person most likely to use your code again?</span></span>
<span id="cb35-432"><a href="#cb35-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-433"><a href="#cb35-433" aria-hidden="true" tabindex="-1"></a>A: You, but at some point in the future by which you will have forgotten what the code does and why.</span>
<span id="cb35-434"><a href="#cb35-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-435"><a href="#cb35-435" aria-hidden="true" tabindex="-1"></a>I can't tell you how many times I've looked back at my</span>
<span id="cb35-436"><a href="#cb35-436" aria-hidden="true" tabindex="-1"></a>own code and been amazed at how little I remember and frustrated with the former self who wrote it.</span>
<span id="cb35-437"><a href="#cb35-437" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-438"><a href="#cb35-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-439"><a href="#cb35-439" aria-hidden="true" tabindex="-1"></a>A go-to reference on Python code style is the <span class="co">[</span><span class="ot">PEP8 style guide</span><span class="co">](https://peps.python.org/pep-0008)</span>. That said, it's extensive, quite detailed, and hard to absorb quickly.</span>
<span id="cb35-440"><a href="#cb35-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-441"><a href="#cb35-441" aria-hidden="true" tabindex="-1"></a>Here are a few key suggestions:</span>
<span id="cb35-442"><a href="#cb35-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-443"><a href="#cb35-443" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Indentation:</span>
<span id="cb35-444"><a href="#cb35-444" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Python is strict about indentation of course.</span>
<span id="cb35-445"><a href="#cb35-445" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Use 4 spaces per indentation level (avoid tabs if possible).</span>
<span id="cb35-446"><a href="#cb35-446" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Whitespace: use it in a variety of places. Some places where it is good to have it</span>
<span id="cb35-447"><a href="#cb35-447" aria-hidden="true" tabindex="-1"></a>    are</span>
<span id="cb35-448"><a href="#cb35-448" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>around operators (assignment and arithmetic), e.g., <span class="in">`x = x * 3`</span>;</span>
<span id="cb35-449"><a href="#cb35-449" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>between function arguments, e.g., <span class="in">`myfun(x, 3, data)`</span>;</span>
<span id="cb35-450"><a href="#cb35-450" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>between list/tuple elements, e.g., <span class="in">`x = [3, 5, 7]`</span>; and</span>
<span id="cb35-451"><a href="#cb35-451" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>between matrix/array indices, e.g., <span class="in">`x[3, :4]`</span>.</span>
<span id="cb35-452"><a href="#cb35-452" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use blank lines to separate blocks of code with comments to say what</span>
<span id="cb35-453"><a href="#cb35-453" aria-hidden="true" tabindex="-1"></a>    the block does.</span>
<span id="cb35-454"><a href="#cb35-454" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use whitespaces or parentheses for clarity even if not needed for order of</span>
<span id="cb35-455"><a href="#cb35-455" aria-hidden="true" tabindex="-1"></a>    operations. For example, <span class="in">`a/y*x`</span> will work but is not easy to read</span>
<span id="cb35-456"><a href="#cb35-456" aria-hidden="true" tabindex="-1"></a>    and you can easily induce a bug if you forget the order of ops. Instead,</span>
<span id="cb35-457"><a href="#cb35-457" aria-hidden="true" tabindex="-1"></a>    use <span class="in">`a/y * x`</span> or <span class="in">`(a/y) * x`</span>.</span>
<span id="cb35-458"><a href="#cb35-458" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Avoid code lines longer than 79 characters and comment/docstring lines</span>
<span id="cb35-459"><a href="#cb35-459" aria-hidden="true" tabindex="-1"></a>    longer than 72 characters.</span>
<span id="cb35-460"><a href="#cb35-460" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Comments:</span>
<span id="cb35-461"><a href="#cb35-461" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Add comments to explain why, not how.</span>
<span id="cb35-462"><a href="#cb35-462" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Don't belabor the obvious; avoid things like <span class="in">`x = x + 1  # Increment x.`</span>.</span>
<span id="cb35-463"><a href="#cb35-463" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Some key things to document:</span>
<span id="cb35-464"><a href="#cb35-464" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>summarizing a block of code,</span>
<span id="cb35-465"><a href="#cb35-465" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>explaining a complicated piece of code or particular construction, and</span>
<span id="cb35-466"><a href="#cb35-466" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>explaining non-obvious values or steps, such as <span class="in">`x = x + 1 # Compensate for image border.`</span></span>
<span id="cb35-467"><a href="#cb35-467" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Comments should generally be complete sentences.</span>
<span id="cb35-468"><a href="#cb35-468" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>You can use parentheses to group operations such that they can be split up into lines</span>
<span id="cb35-469"><a href="#cb35-469" aria-hidden="true" tabindex="-1"></a>  and easily commented, e.g.,</span>
<span id="cb35-470"><a href="#cb35-470" aria-hidden="true" tabindex="-1"></a>  <span class="in">```{python}</span></span>
<span id="cb35-471"><a href="#cb35-471" aria-hidden="true" tabindex="-1"></a><span class="in">  #| eval: false</span></span>
<span id="cb35-472"><a href="#cb35-472" aria-hidden="true" tabindex="-1"></a><span class="in">  newdf = (</span></span>
<span id="cb35-473"><a href="#cb35-473" aria-hidden="true" tabindex="-1"></a><span class="in">          pd.read_csv('file.csv')                   # 1988 census data.</span></span>
<span id="cb35-474"><a href="#cb35-474" aria-hidden="true" tabindex="-1"></a><span class="in">          .rename(columns = {'STATE': 'us_state'})  # Adjust column names.</span></span>
<span id="cb35-475"><a href="#cb35-475" aria-hidden="true" tabindex="-1"></a><span class="in">          .dropna()                                 # Remove rows with missing values.</span></span>
<span id="cb35-476"><a href="#cb35-476" aria-hidden="true" tabindex="-1"></a><span class="in">          )</span></span>
<span id="cb35-477"><a href="#cb35-477" aria-hidden="true" tabindex="-1"></a><span class="in">  ```</span></span>
<span id="cb35-478"><a href="#cb35-478" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Being consistent about the naming style for objects and functions is hard, but try to be consistent. PEP8 suggests:</span>
<span id="cb35-479"><a href="#cb35-479" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Class names should be UpperCamelCase.</span>
<span id="cb35-480"><a href="#cb35-480" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Function, method, and variable names should be snake_case, e.g., <span class="in">`number_of_its`</span> or <span class="in">`n_its`</span>.</span>
<span id="cb35-481"><a href="#cb35-481" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Non-public methods and variables should have a leading underscore.</span>
<span id="cb35-482"><a href="#cb35-482" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Try to have the names be informative without being overly long.</span>
<span id="cb35-483"><a href="#cb35-483" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Don't overwrite names of objects/functions that already exist in the language. E.g., don't use <span class="in">`len`</span> in Python. That said, the namespace system helps with the unavoidable cases where there are name conflicts.</span>
<span id="cb35-484"><a href="#cb35-484" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use active names for functions (e.g., <span class="in">`calc_loglik`</span>, <span class="in">`calc_log_lik`</span></span>
<span id="cb35-485"><a href="#cb35-485" aria-hidden="true" tabindex="-1"></a>    rather than <span class="in">`loglik`</span> or <span class="in">`loglik_calc`</span>). Functions are akin to verbs.</span>
<span id="cb35-486"><a href="#cb35-486" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Learn from others' code</span>
<span id="cb35-487"><a href="#cb35-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-488"><a href="#cb35-488" aria-hidden="true" tabindex="-1"></a><span class="fu">## Linting</span></span>
<span id="cb35-489"><a href="#cb35-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-490"><a href="#cb35-490" aria-hidden="true" tabindex="-1"></a>Linting is the process of applying a tool to your code to enforce style.</span>
<span id="cb35-491"><a href="#cb35-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-492"><a href="#cb35-492" aria-hidden="true" tabindex="-1"></a>We'll demo using <span class="in">`ruff`</span> to some example code. You might also consider <span class="in">`black`</span>.</span>
<span id="cb35-493"><a href="#cb35-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-494"><a href="#cb35-494" aria-hidden="true" tabindex="-1"></a>We'll practice with <span class="in">`ruff`</span> with a small module we'll use next also for debugging.</span>
<span id="cb35-495"><a href="#cb35-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-496"><a href="#cb35-496" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First, we check for and fix syntax errors.</span>
<span id="cb35-497"><a href="#cb35-497" aria-hidden="true" tabindex="-1"></a>  <span class="in">```bash</span></span>
<span id="cb35-498"><a href="#cb35-498" aria-hidden="true" tabindex="-1"></a>  <span class="ex">ruff</span> check binary_search.py</span>
<span id="cb35-499"><a href="#cb35-499" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb35-500"><a href="#cb35-500" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Then we ask <span class="in">`ruff`</span> to reformat to conform to standard style.</span>
<span id="cb35-501"><a href="#cb35-501" aria-hidden="true" tabindex="-1"></a>  <span class="in">```bash</span></span>
<span id="cb35-502"><a href="#cb35-502" aria-hidden="true" tabindex="-1"></a>  <span class="ex">ruff</span> format binary_search.py</span>
<span id="cb35-503"><a href="#cb35-503" aria-hidden="true" tabindex="-1"></a>  <span class="in">```</span></span>
<span id="cb35-504"><a href="#cb35-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-505"><a href="#cb35-505" aria-hidden="true" tabindex="-1"></a>Let's see what changed:</span>
<span id="cb35-506"><a href="#cb35-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-507"><a href="#cb35-507" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-508"><a href="#cb35-508" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span> binary_search_orig.py binary_search.py</span>
<span id="cb35-509"><a href="#cb35-509" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-510"><a href="#cb35-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-511"><a href="#cb35-511" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: add documentation and comments to your Newton module</span></span>
<span id="cb35-512"><a href="#cb35-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-513"><a href="#cb35-513" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Add a <span class="co">[</span><span class="ot">doc string</span><span class="co">](https://peps.python.org/pep-0257)</span> to each of your functions. Focus on your main function. Take a look at an example, such as <span class="in">`help(numpy.linalg.cholesky)`</span> to see the different parts and the format.</span>
<span id="cb35-514"><a href="#cb35-514" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Consider whether to add comments to your code.</span>
<span id="cb35-515"><a href="#cb35-515" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Apply <span class="in">`ruff`</span> to your code.</span>
<span id="cb35-516"><a href="#cb35-516" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Compare the results with the style suggestions above and do additional reformatting as needed.</span>
<span id="cb35-517"><a href="#cb35-517" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Commit and push to GitHub. Remember to have a good commit message!</span>
<span id="cb35-518"><a href="#cb35-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-519"><a href="#cb35-519" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5. Debugging</span></span>
<span id="cb35-520"><a href="#cb35-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-521"><a href="#cb35-521" aria-hidden="true" tabindex="-1"></a>Once you start writing more complicated code, even in an interpreted language such as Python that you can run line-by-line, you'll want to use a debugger, particularly when you have nested function calls.</span>
<span id="cb35-522"><a href="#cb35-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-523"><a href="#cb35-523" aria-hidden="true" tabindex="-1"></a>Debugging can be a slow process, so you typically start a debugging session by deciding which line in your code you would like to start tracing the behavior from, and you place a *breakpoint*. Then you can have the debugger run the program up to that point and stop at it, allowing you to:</span>
<span id="cb35-524"><a href="#cb35-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-525"><a href="#cb35-525" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>inspect the current state of variables,</span>
<span id="cb35-526"><a href="#cb35-526" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>step through the code line by line,</span>
<span id="cb35-527"><a href="#cb35-527" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>step over or into functions as they are called, and</span>
<span id="cb35-528"><a href="#cb35-528" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>resume program execution.</span>
<span id="cb35-529"><a href="#cb35-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-530"><a href="#cb35-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-531"><a href="#cb35-531" aria-hidden="true" tabindex="-1"></a>The *stack* is the series of nested function calls. When an error occurs, Python will print the *stack trace* showing the sequence of calls leading to the error. This can be helpful and distracting/confusing.</span>
<span id="cb35-532"><a href="#cb35-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-533"><a href="#cb35-533" aria-hidden="true" tabindex="-1"></a>We'll use the debugger in JupyterLab; similar functionality is in VS Code. And you can use <span class="in">`pdb`</span> directly from the command line; the ideas are all the same.</span>
<span id="cb35-534"><a href="#cb35-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-535"><a href="#cb35-535" aria-hidden="true" tabindex="-1"></a><span class="fu">## Demo: debugging the `binary_search` example</span></span>
<span id="cb35-536"><a href="#cb35-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-537"><a href="#cb35-537" aria-hidden="true" tabindex="-1"></a><span class="fu">### Using the JupyterLab visual debugger</span></span>
<span id="cb35-538"><a href="#cb35-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-539"><a href="#cb35-539" aria-hidden="true" tabindex="-1"></a>The function <span class="in">`binary_search()`</span> in the <span class="in">`binary_search.py`</span> module attempts to do a binary search for an item in a sorted list. It looks in the middle of the list and if the value in the list is larger than the item, it recurses to look in the first half of the list, otherwise in the second half. It continues in this fashion until it is down to a single item and then checks if that item is what is being searched for.</span>
<span id="cb35-540"><a href="#cb35-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-543"><a href="#cb35-543" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb35-544"><a href="#cb35-544" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> binary_search <span class="im">as</span> bs</span>
<span id="cb35-545"><a href="#cb35-545" aria-hidden="true" tabindex="-1"></a>bs.search([<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>,<span class="dv">203</span>,<span class="dv">205</span>],<span class="dv">3</span>)</span>
<span id="cb35-546"><a href="#cb35-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-549"><a href="#cb35-549" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb35-550"><a href="#cb35-550" aria-hidden="true" tabindex="-1"></a>bs.search([<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>,<span class="dv">203</span>,<span class="dv">205</span>],<span class="dv">13</span>)</span>
<span id="cb35-551"><a href="#cb35-551" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-554"><a href="#cb35-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb35-555"><a href="#cb35-555" aria-hidden="true" tabindex="-1"></a>bs.search([<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">13</span>,<span class="dv">17</span>,<span class="dv">203</span>,<span class="dv">205</span>],<span class="dv">17</span>)</span>
<span id="cb35-556"><a href="#cb35-556" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-557"><a href="#cb35-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-558"><a href="#cb35-558" aria-hidden="true" tabindex="-1"></a>Clearly that doesn't always work. Let's debug the failing case.</span>
<span id="cb35-559"><a href="#cb35-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-560"><a href="#cb35-560" aria-hidden="true" tabindex="-1"></a>We'll work in our Jupyter notebook.</span>
<span id="cb35-561"><a href="#cb35-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-562"><a href="#cb35-562" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First turn on debugging capability by clicking on the small "bug" icon of the top navigation bar under the file tabs and to the left of the  info about the kernel.</span>
<span id="cb35-563"><a href="#cb35-563" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Next we click on a line of code to set a breakpoint (or add <span class="in">`breakpoint()`</span> in a line of a source file).</span>
<span id="cb35-564"><a href="#cb35-564" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Now we run the function by executing the cell containing the function call. We can:</span>
<span id="cb35-565"><a href="#cb35-565" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>continue (to the end or the next breakpoint),</span>
<span id="cb35-566"><a href="#cb35-566" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>run the next line,</span>
<span id="cb35-567"><a href="#cb35-567" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>step (in/down) into a nested function, or</span>
<span id="cb35-568"><a href="#cb35-568" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>step (out/up) out of a function.</span>
<span id="cb35-569"><a href="#cb35-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-570"><a href="#cb35-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-571"><a href="#cb35-571" aria-hidden="true" tabindex="-1"></a><span class="fu">### Using the IPython debugger (`ipdb`)</span></span>
<span id="cb35-572"><a href="#cb35-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-573"><a href="#cb35-573" aria-hidden="true" tabindex="-1"></a>We can use the IPython <span class="in">`%debug`</span> "magic" to activate a debugger as well.</span>
<span id="cb35-574"><a href="#cb35-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-575"><a href="#cb35-575" aria-hidden="true" tabindex="-1"></a>One way this is particularly useful is "post-mortem" debugging, i.e., debugging when exceptions (errors) have occurred. We just invoke <span class="in">`%debug`</span> and then (re)run the code that is failing.</span>
<span id="cb35-576"><a href="#cb35-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-577"><a href="#cb35-577" aria-hidden="true" tabindex="-1"></a>Once in the ipdb debugger, we can use these commands (most of which correspond to icons we used to control the JupyterLab debugger behavior</span>
<span id="cb35-578"><a href="#cb35-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-579"><a href="#cb35-579" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`p expr`</span> to print the result of the <span class="in">`expr`</span> code</span>
<span id="cb35-580"><a href="#cb35-580" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`c`</span> to continue execution (until the end or the next breakpoint)</span>
<span id="cb35-581"><a href="#cb35-581" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`n`</span> to run the next line of code</span>
<span id="cb35-582"><a href="#cb35-582" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`u`</span> and <span class="in">`d`</span> to step up and down through the stack of function calls</span>
<span id="cb35-583"><a href="#cb35-583" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`q`</span> to quit the debugger</span>
<span id="cb35-584"><a href="#cb35-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-585"><a href="#cb35-585" aria-hidden="true" tabindex="-1"></a>We'll put a silly error into the <span class="in">`binary_search`</span> code, restart the kernel, and use the post-mortem debugging approach as an illustration.</span>
<span id="cb35-586"><a href="#cb35-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-587"><a href="#cb35-587" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: debugging your Newton code</span></span>
<span id="cb35-588"><a href="#cb35-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-589"><a href="#cb35-589" aria-hidden="true" tabindex="-1"></a>Run your Newton method on the following function, $x^4/4 - x^3 -x$.</span>
<span id="cb35-590"><a href="#cb35-590" aria-hidden="true" tabindex="-1"></a>Sometimes it should fail.</span>
<span id="cb35-591"><a href="#cb35-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-592"><a href="#cb35-592" aria-hidden="true" tabindex="-1"></a>Use the debugger to try to see what goes wrong. (For our purposes here, do this using the debugger; don't figure it out from first principles mathematically or graphically.)</span>
<span id="cb35-593"><a href="#cb35-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-594"><a href="#cb35-594" aria-hidden="true" tabindex="-1"></a>Conditional breakpoints are a useful tool that causes the debugger to stop at a breakpoint only if some condition is true (e.g., if some extreme value is reached in the Newton iterations). I don't see that it's possible to do this with the JupyterLab debugger, but with the <span class="in">`ipdb`</span> debugger you can do things like this to debug a particular line of a particular file if a condition (here <span class="in">`x==5`</span>) is met:</span>
<span id="cb35-595"><a href="#cb35-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-596"><a href="#cb35-596" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-597"><a href="#cb35-597" aria-hidden="true" tabindex="-1"></a><span class="in">b path/to/script.py:999, x==5</span></span>
<span id="cb35-598"><a href="#cb35-598" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-599"><a href="#cb35-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-600"><a href="#cb35-600" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6. Defensive programming, error checking and testing</span></span>
<span id="cb35-601"><a href="#cb35-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-602"><a href="#cb35-602" aria-hidden="true" tabindex="-1"></a><span class="fu">## Demo: Unit tests and `pytest`</span></span>
<span id="cb35-603"><a href="#cb35-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-604"><a href="#cb35-604" aria-hidden="true" tabindex="-1"></a><span class="in">`pytest`</span> is a very popular package/framework for testing. </span>
<span id="cb35-605"><a href="#cb35-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-606"><a href="#cb35-606" aria-hidden="true" tabindex="-1"></a>We create test functions that check for the expected result.</span>
<span id="cb35-607"><a href="#cb35-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-608"><a href="#cb35-608" aria-hidden="true" tabindex="-1"></a>We use <span class="in">`assert`</span> statements. These are ways of generally setting up sanity checks in your code. They are usually used in development, or perhaps data analysis workflows, rather than production code. They are a core part of setting up tests such as here with <span class="in">`pytest`</span>.</span>
<span id="cb35-609"><a href="#cb35-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-610"><a href="#cb35-610" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-611"><a href="#cb35-611" aria-hidden="true" tabindex="-1"></a><span class="ex">pytest</span> test_bs.py</span>
<span id="cb35-612"><a href="#cb35-612" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-613"><a href="#cb35-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-614"><a href="#cb35-614" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Test cases</span></span>
<span id="cb35-615"><a href="#cb35-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-616"><a href="#cb35-616" aria-hidden="true" tabindex="-1"></a>With a partner, brainstorm some test cases for your implementation of Newton's method in terms of the user's function and input values a user might provide.</span>
<span id="cb35-617"><a href="#cb35-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-618"><a href="#cb35-618" aria-hidden="true" tabindex="-1"></a>In addition to cases where it should succeed, you'll want to consider cases where Newton's method fails and test whether the user gets an informative result. Of course as a starting point, the case we used for the debugging exercise is a good one for a failing case. </span>
<span id="cb35-619"><a href="#cb35-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-620"><a href="#cb35-620" aria-hidden="true" tabindex="-1"></a>We'll collect some possible tests once each group has had a chance to brainstorm.</span>
<span id="cb35-621"><a href="#cb35-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-622"><a href="#cb35-622" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Unit tests</span></span>
<span id="cb35-623"><a href="#cb35-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-624"><a href="#cb35-624" aria-hidden="true" tabindex="-1"></a>We'll implement our test cases as unit tests using the <span class="in">`pytest`</span> package.</span>
<span id="cb35-625"><a href="#cb35-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-626"><a href="#cb35-626" aria-hidden="true" tabindex="-1"></a>Include tests for:</span>
<span id="cb35-627"><a href="#cb35-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-628"><a href="#cb35-628" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>successful optimization</span>
<span id="cb35-629"><a href="#cb35-629" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>unsuccessful optimization</span>
<span id="cb35-630"><a href="#cb35-630" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>invalid user inputs</span>
<span id="cb35-631"><a href="#cb35-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-632"><a href="#cb35-632" aria-hidden="true" tabindex="-1"></a>with the expected output being what you *want* to happen, not necessarily what your function does.</span>
<span id="cb35-633"><a href="#cb35-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-634"><a href="#cb35-634" aria-hidden="true" tabindex="-1"></a>You'll want cases where you know the correct answer. Start simple.</span>
<span id="cb35-635"><a href="#cb35-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-636"><a href="#cb35-636" aria-hidden="true" tabindex="-1"></a>::: {.callout-caution}</span>
<span id="cb35-637"><a href="#cb35-637" aria-hidden="true" tabindex="-1"></a><span class="fu">## Only write tests now</span></span>
<span id="cb35-638"><a href="#cb35-638" aria-hidden="true" tabindex="-1"></a>For now don't modify your code even if you start to suspect how it might fail. Writing the tests and then modifying code so they pass is an example of *test-driven development*.</span>
<span id="cb35-639"><a href="#cb35-639" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-640"><a href="#cb35-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-641"><a href="#cb35-641" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Error trapping, robust code, and defensive programming</span></span>
<span id="cb35-642"><a href="#cb35-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-643"><a href="#cb35-643" aria-hidden="true" tabindex="-1"></a>Now we'll try to go beyond simply returning a failed result and see if we can trap problems early on and write more robust code. </span>
<span id="cb35-644"><a href="#cb35-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-645"><a href="#cb35-645" aria-hidden="true" tabindex="-1"></a>Work on the following improvements:</span>
<span id="cb35-646"><a href="#cb35-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-647"><a href="#cb35-647" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Check user inputs are valid.</span>
<span id="cb35-648"><a href="#cb35-648" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Add warnings to the user if it seems that Newton's method is taking a bad step.</span>
<span id="cb35-649"><a href="#cb35-649" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Modify your function so that when it fails, the result is informative to the user.</span>
<span id="cb35-650"><a href="#cb35-650" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Include a success/failure code (flag) in your output.</span>
<span id="cb35-651"><a href="#cb35-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-652"><a href="#cb35-652" aria-hidden="true" tabindex="-1"></a>We don't have time to go fully into how Python handles errors (called exceptions). Here are a few basic things you can do to *raise* an *exception* (i.e., to report an error):</span>
<span id="cb35-653"><a href="#cb35-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-654"><a href="#cb35-654" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-655"><a href="#cb35-655" aria-hidden="true" tabindex="-1"></a><span class="in">if not callable(f):</span></span>
<span id="cb35-656"><a href="#cb35-656" aria-hidden="true" tabindex="-1"></a><span class="in">   raise TypeError(f"Argument is not a function, it is of type {type(f)}")</span></span>
<span id="cb35-657"><a href="#cb35-657" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-658"><a href="#cb35-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-659"><a href="#cb35-659" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-660"><a href="#cb35-660" aria-hidden="true" tabindex="-1"></a><span class="in">if x &gt; 1e7:</span></span>
<span id="cb35-661"><a href="#cb35-661" aria-hidden="true" tabindex="-1"></a><span class="in">   raise RuntimeError(f"At iteration {iter}, optimization appears to be diverging")</span></span>
<span id="cb35-662"><a href="#cb35-662" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-663"><a href="#cb35-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-664"><a href="#cb35-664" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-665"><a href="#cb35-665" aria-hidden="true" tabindex="-1"></a><span class="in">import warnings</span></span>
<span id="cb35-666"><a href="#cb35-666" aria-hidden="true" tabindex="-1"></a><span class="in">if x &gt; 3:</span></span>
<span id="cb35-667"><a href="#cb35-667" aria-hidden="true" tabindex="-1"></a><span class="in">   warnings.warn(f"{x} is greater than 3.")</span></span>
<span id="cb35-668"><a href="#cb35-668" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span>
<span id="cb35-669"><a href="#cb35-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-670"><a href="#cb35-670" aria-hidden="true" tabindex="-1"></a>Next, if you have time, consider robustifying your code if you have time:</span>
<span id="cb35-671"><a href="#cb35-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-672"><a href="#cb35-672" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>What might you do if the next step is worse than the current position?  </span>
<span id="cb35-673"><a href="#cb35-673" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>What might you do if the next step is outside the range of potential values (assuming a unimodal function)? </span>
<span id="cb35-674"><a href="#cb35-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-675"><a href="#cb35-675" aria-hidden="true" tabindex="-1"></a><span class="fu"># 7. Multi-user Git</span></span>
<span id="cb35-676"><a href="#cb35-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-677"><a href="#cb35-677" aria-hidden="true" tabindex="-1"></a>Once you are working on more complicated projects and particularly when working with multiple people, you'll want to be able to use branches and pull requests (PRs) to manage the work.</span>
<span id="cb35-678"><a href="#cb35-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-679"><a href="#cb35-679" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb35-680"><a href="#cb35-680" aria-hidden="true" tabindex="-1"></a><span class="fu">## Why use branches and pull requests?</span></span>
<span id="cb35-681"><a href="#cb35-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-682"><a href="#cb35-682" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Experiment without worrying about breaking the current code.</span>
<span id="cb35-683"><a href="#cb35-683" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Test your code before finalizing changes (particularly with testing via continuous integration / GitHub Actions).</span>
<span id="cb35-684"><a href="#cb35-684" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Organize aspects of the project for clarity and collaboration.</span>
<span id="cb35-685"><a href="#cb35-685" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Manage collaboration:</span>
<span id="cb35-686"><a href="#cb35-686" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Manage code contributions from others.</span>
<span id="cb35-687"><a href="#cb35-687" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Discuss changes.</span>
<span id="cb35-688"><a href="#cb35-688" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Keep track of changes.</span>
<span id="cb35-689"><a href="#cb35-689" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Accept external contributions.</span>
<span id="cb35-690"><a href="#cb35-690" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Resolve conflicts between different changes.</span>
<span id="cb35-691"><a href="#cb35-691" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-692"><a href="#cb35-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-693"><a href="#cb35-693" aria-hidden="true" tabindex="-1"></a>Before going further, let's review our visualization of working with Git (<span class="co">[</span><span class="ot">online version</span><span class="co">](https://docs.google.com/presentation/d/1YlM3boYLE8DwbxGNO3ZVVt3e9gEoBgD1uc9RtItUYCU)</span>, <span class="co">[</span><span class="ot">PDF version</span><span class="co">](git_visuals.pdf)</span>)</span>
<span id="cb35-694"><a href="#cb35-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-695"><a href="#cb35-695" aria-hidden="true" tabindex="-1"></a><span class="fu">## Demo: Branching and pull requests, merge conflicts</span></span>
<span id="cb35-696"><a href="#cb35-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-697"><a href="#cb35-697" aria-hidden="true" tabindex="-1"></a>We'll demo the use of branching and PRs by fixing our <span class="in">`binary_search`</span> function.</span>
<span id="cb35-698"><a href="#cb35-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-699"><a href="#cb35-699" aria-hidden="true" tabindex="-1"></a><span class="fu">### Branching</span></span>
<span id="cb35-700"><a href="#cb35-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-701"><a href="#cb35-701" aria-hidden="true" tabindex="-1"></a>First, let's fix the error in our <span class="in">`binary_search`</span> function in a new branch.</span>
<span id="cb35-702"><a href="#cb35-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-703"><a href="#cb35-703" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-704"><a href="#cb35-704" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> switch <span class="at">-c</span> fix_midpoint_bug</span>
<span id="cb35-705"><a href="#cb35-705" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-706"><a href="#cb35-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-707"><a href="#cb35-707" aria-hidden="true" tabindex="-1"></a>We'll now make the fixes and do the linting (not shown).</span>
<span id="cb35-708"><a href="#cb35-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-709"><a href="#cb35-709" aria-hidden="true" tabindex="-1"></a>Push the branch with the fix to GitHub.</span>
<span id="cb35-710"><a href="#cb35-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-711"><a href="#cb35-711" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb35-712"><a href="#cb35-712" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add binary_search.py</span>
<span id="cb35-713"><a href="#cb35-713" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span><span class="st">"Fix bug in handling midpoint.</span></span>
<span id="cb35-714"><a href="#cb35-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-715"><a href="#cb35-715" aria-hidden="true" tabindex="-1"></a><span class="st">Lint code."</span></span>
<span id="cb35-716"><a href="#cb35-716" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin fix_midpoint_bug</span>
<span id="cb35-717"><a href="#cb35-717" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb35-718"><a href="#cb35-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-719"><a href="#cb35-719" aria-hidden="true" tabindex="-1"></a><span class="fu">### Pull requests</span></span>
<span id="cb35-720"><a href="#cb35-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-721"><a href="#cb35-721" aria-hidden="true" tabindex="-1"></a>Now we'll go to GitHub and start a pull request (PR).</span>
<span id="cb35-722"><a href="#cb35-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-723"><a href="#cb35-723" aria-hidden="true" tabindex="-1"></a>Since we're the ones who control the repo, we'll also review and merge in the PR.</span>
<span id="cb35-724"><a href="#cb35-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-725"><a href="#cb35-725" aria-hidden="true" tabindex="-1"></a><span class="fu">### Merge conflicts</span></span>
<span id="cb35-726"><a href="#cb35-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-727"><a href="#cb35-727" aria-hidden="true" tabindex="-1"></a>Next let's see a basic example of a *merge conflict*, which occurs when two commits modify (which could include deletion) the same line in a file. In this case Git requires the user to figure out what should be done.</span>
<span id="cb35-728"><a href="#cb35-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-729"><a href="#cb35-729" aria-hidden="true" tabindex="-1"></a>To get an example, we need to create a conflict. I will add different documentation in the <span class="in">`main`</span> and <span class="in">`fix_midpoint_bug`</span> branches. After pushing the <span class="in">`main`</span> change, I'll try to do a PR with the <span class="in">`fix_midpoint_bug`</span>.</span>
<span id="cb35-730"><a href="#cb35-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-731"><a href="#cb35-731" aria-hidden="true" tabindex="-1"></a>The GitHub UI does a nice job of helping you resolve merge conflicts, as we'll see.</span>
<span id="cb35-732"><a href="#cb35-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-733"><a href="#cb35-733" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb35-734"><a href="#cb35-734" aria-hidden="true" tabindex="-1"></a><span class="fu">## Resolving conflicts at the command line</span></span>
<span id="cb35-735"><a href="#cb35-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-736"><a href="#cb35-736" aria-hidden="true" tabindex="-1"></a>You can also get (and resolve) merge conflicts on the command line. Git will add some syntax to the conflicted file pointing out the conflicts that need to be resolved. Once you edit the conflicted file to fix the conflict, you can do <span class="in">`git add &lt;name_of_file&gt;`</span> and then <span class="in">`git commit`</span>.</span>
<span id="cb35-737"><a href="#cb35-737" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb35-738"><a href="#cb35-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-739"><a href="#cb35-739" aria-hidden="true" tabindex="-1"></a><span class="fu">## Multivariate Newton's method</span></span>
<span id="cb35-740"><a href="#cb35-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-741"><a href="#cb35-741" aria-hidden="true" tabindex="-1"></a>Recall that Newton's method optimizes some objective function, $f(x)$ as a function of univariate or multivariate $x$, where $f(x)$ is univariate.</span>
<span id="cb35-742"><a href="#cb35-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-743"><a href="#cb35-743" aria-hidden="true" tabindex="-1"></a>The multivariate method extends the univariate, using the gradient (first derivative) vector and Hessian (second derivative) matrix.</span>
<span id="cb35-744"><a href="#cb35-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-745"><a href="#cb35-745" aria-hidden="true" tabindex="-1"></a>If we are at step $t-1$, the next value is:</span>
<span id="cb35-746"><a href="#cb35-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-747"><a href="#cb35-747" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb35-748"><a href="#cb35-748" aria-hidden="true" tabindex="-1"></a>x_{t+1}=x_{t}-H_{f}(x_{t})^{-1}\nabla f(x_{t})</span>
<span id="cb35-749"><a href="#cb35-749" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb35-750"><a href="#cb35-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-751"><a href="#cb35-751" aria-hidden="true" tabindex="-1"></a>where $\nabla f(x_{t}$ is the gradient (first derivative with respect to each element of $x$) and $H_{f}(x_{t})$ is the Hessian matrix (second derivatives with respect to all pairs of the elements of $x$).</span>
<span id="cb35-752"><a href="#cb35-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-753"><a href="#cb35-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-754"><a href="#cb35-754" aria-hidden="true" tabindex="-1"></a>Here are the steps:</span>
<span id="cb35-755"><a href="#cb35-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-756"><a href="#cb35-756" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>determine a starting value, $x_0$.</span>
<span id="cb35-757"><a href="#cb35-757" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>iterate:</span>
<span id="cb35-758"><a href="#cb35-758" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>at step $t$, the next value (the update) is given by the equation above</span>
<span id="cb35-759"><a href="#cb35-759" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>stop when $\left\Vert x_{t} - x_{t-1} \right\Vert$ is "small"</span>
<span id="cb35-760"><a href="#cb35-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-761"><a href="#cb35-761" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Branching</span></span>
<span id="cb35-762"><a href="#cb35-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-763"><a href="#cb35-763" aria-hidden="true" tabindex="-1"></a>Working with a partner:</span>
<span id="cb35-764"><a href="#cb35-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-765"><a href="#cb35-765" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Choose either your repository or your partner's repository to continue working in.</span>
<span id="cb35-766"><a href="#cb35-766" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Make a branch (called <span class="in">`multivariate`</span>) in which you'll implement the multivariate version of Newton's method (see details above)</span>
<span id="cb35-767"><a href="#cb35-767" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Implement the algorithm.</span>
<span id="cb35-768"><a href="#cb35-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-769"><a href="#cb35-769" aria-hidden="true" tabindex="-1"></a>At this point, if we think about calculating the Hessian it starts to feel more tedious to deal with the finite difference calculations, though it is a straightforward extension of what you already implemented. Feel free to look online to find a Python package that implements finite difference estimation of derivatives and use that in your code.</span>
<span id="cb35-770"><a href="#cb35-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-771"><a href="#cb35-771" aria-hidden="true" tabindex="-1"></a>As you are writing the code, you can continue to think about what might go wrong and include defensive programming tactics. </span>
<span id="cb35-772"><a href="#cb35-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-773"><a href="#cb35-773" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Pull requests (PRs)</span></span>
<span id="cb35-774"><a href="#cb35-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-775"><a href="#cb35-775" aria-hidden="true" tabindex="-1"></a>When you have your branch ready, make a pull request:</span>
<span id="cb35-776"><a href="#cb35-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-777"><a href="#cb35-777" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Make a pull request into the remote for the repository by pushing the branch to GitHub</span>
<span id="cb35-778"><a href="#cb35-778" aria-hidden="true" tabindex="-1"></a>   <span class="in">```bash</span></span>
<span id="cb35-779"><a href="#cb35-779" aria-hidden="true" tabindex="-1"></a>   <span class="fu">git</span> push <span class="at">-u</span> origin multivariate</span>
<span id="cb35-780"><a href="#cb35-780" aria-hidden="true" tabindex="-1"></a>   <span class="in">```</span></span>
<span id="cb35-781"><a href="#cb35-781" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb35-782"><a href="#cb35-782" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Go to GitHub to the <span class="in">`Pull requests`</span> tab and make the PR, making a note of what the PR is about.</span>
<span id="cb35-783"><a href="#cb35-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-784"><a href="#cb35-784" aria-hidden="true" tabindex="-1"></a>Don't (yet) merge in the PR. We want someone else to review it to have additional eyes on the code.</span>
<span id="cb35-785"><a href="#cb35-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-786"><a href="#cb35-786" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Code review</span></span>
<span id="cb35-787"><a href="#cb35-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-788"><a href="#cb35-788" aria-hidden="true" tabindex="-1"></a>Now you and your partner should find a separate group with which to work on code reviews as a "supergroup".</span>
<span id="cb35-789"><a href="#cb35-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-790"><a href="#cb35-790" aria-hidden="true" tabindex="-1"></a>Give the other group the URL for your repository on GitHub and ask them to look at the PR.</span>
<span id="cb35-791"><a href="#cb35-791" aria-hidden="true" tabindex="-1"></a>In turn get the URL for their repository.</span>
<span id="cb35-792"><a href="#cb35-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-793"><a href="#cb35-793" aria-hidden="true" tabindex="-1"></a>In reviewing the PR, make comments in the PR comment/conversation area on GitHub. You and your partner can work together to make comments or you can each make separate comments.</span>
<span id="cb35-794"><a href="#cb35-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-795"><a href="#cb35-795" aria-hidden="true" tabindex="-1"></a>If you have time, explore these two additional options for making comments:</span>
<span id="cb35-796"><a href="#cb35-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-797"><a href="#cb35-797" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Review changes:</span>
<span id="cb35-798"><a href="#cb35-798" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Click on the <span class="in">`Files changed`</span> tab (or go to <span class="in">`https://github.com/&lt;USERNAME&gt;/newton-practice/pull/&lt;PULL_ID&gt;/files`</span> for the specific "PULL_ID").</span>
<span id="cb35-799"><a href="#cb35-799" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Click on the <span class="in">`Review changes`</span> button.</span>
<span id="cb35-800"><a href="#cb35-800" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Make comments on specific lines</span>
<span id="cb35-801"><a href="#cb35-801" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Click on the <span class="in">`Files changed`</span> tab (or go to <span class="in">`https://github.com/&lt;USERNAME&gt;/newton-practice/pull/&lt;PULL_ID&gt;/files`</span> for the specific "PULL_ID").</span>
<span id="cb35-802"><a href="#cb35-802" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Hover over a specific line in a specific file with your mouse. A blue "plus" box should appear. Click on the plus to add a comment.</span>
<span id="cb35-803"><a href="#cb35-803" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span>Click on <span class="in">`Add single comment`</span> or optionally experiment with <span class="in">`Start a review`</span>.</span>
<span id="cb35-804"><a href="#cb35-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-805"><a href="#cb35-805" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise: Merge the PR</span></span>
<span id="cb35-806"><a href="#cb35-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-807"><a href="#cb35-807" aria-hidden="true" tabindex="-1"></a>Once you've seen the review by the other group, with your partner:</span>
<span id="cb35-808"><a href="#cb35-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-809"><a href="#cb35-809" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>On DataHub, make changes to the branch that was used in the pull request.</span>
<span id="cb35-810"><a href="#cb35-810" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Alternatively, you could make the changes directly on GitHub using its editing capabilities.</span>
<span id="cb35-811"><a href="#cb35-811" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>On DataHub, commit and push to GitHub.</span>
<span id="cb35-812"><a href="#cb35-812" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>On GitHub, merge in the pull request and close the request.</span>
<span id="cb35-813"><a href="#cb35-813" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>You may want to delete the branch. This helps avoid having a profusion of unneeded branches.</span>
<span id="cb35-814"><a href="#cb35-814" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>On DataHub, run <span class="in">`git pull`</span> to get the changes updated in the <span class="in">`main`</span> branch of your local repository.</span>
<span id="cb35-815"><a href="#cb35-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-816"><a href="#cb35-816" aria-hidden="true" tabindex="-1"></a>::: {.callout-important}</span>
<span id="cb35-817"><a href="#cb35-817" aria-hidden="true" tabindex="-1"></a><span class="fu">## The full cycle of "git virtue"</span></span>
<span id="cb35-818"><a href="#cb35-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-819"><a href="#cb35-819" aria-hidden="true" tabindex="-1"></a>Congratulations. In the course of the day, you've worked through the steps of complete, albeit small, project using an extensive set of concepts, skills, and tools used in real world projects.</span>
<span id="cb35-820"><a href="#cb35-820" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>